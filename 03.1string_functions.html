<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>5&nbsp; String Functions – R Course: Beginner to Expert </title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./04-reading-sas.html" rel="next">
<link href="./03-manipulating-vectors-dataframes-lists.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-0dd2bd5de344125cf763a379ddc3eb04.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./03.1string_functions.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">String Functions</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R Course: Beginner to Expert</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Welcome</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-r-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">R Basics</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-data-types-structures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Types &amp; Data Structures</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-manipulating-vectors-dataframes-lists.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Manipulating Vectors, Data Frames, and Lists</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03.1string_functions.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">String Functions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-reading-sas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Reading SAS Datasets (+ Cleaning)</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-base-functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Base R Functions &amp; Apply Family</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-custom-functions-validation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Custom Functions &amp; Validation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-package-development.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">R Package Development</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-git-rstudio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Git in RStudio (Setup &amp; Auth)</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-adam-adsl.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Creating ADaM: ADSL from SDTM-like Inputs</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-tlf.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">TLFs: Table, Figure, Listing</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-capstone.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Capstone: End-to-End Mini Workflow</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-appendix.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Appendix: Tips, Profiles, .libPaths</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#string-functions-in-base-r" id="toc-string-functions-in-base-r" class="nav-link active" data-scroll-target="#string-functions-in-base-r"><span class="header-section-number">6</span> String Functions in Base R</a>
  <ul class="collapse">
  <li><a href="#basic-string-functions" id="toc-basic-string-functions" class="nav-link" data-scroll-target="#basic-string-functions"><span class="header-section-number">6.1</span> Basic String Functions</a></li>
  <li><a href="#pattern-matching-and-replacement" id="toc-pattern-matching-and-replacement" class="nav-link" data-scroll-target="#pattern-matching-and-replacement"><span class="header-section-number">6.2</span> Pattern Matching and Replacement</a></li>
  <li><a href="#string-splitting-and-joining" id="toc-string-splitting-and-joining" class="nav-link" data-scroll-target="#string-splitting-and-joining"><span class="header-section-number">6.3</span> String Splitting and Joining</a></li>
  <li><a href="#regular-expressions" id="toc-regular-expressions" class="nav-link" data-scroll-target="#regular-expressions"><span class="header-section-number">6.4</span> Regular Expressions</a></li>
  <li><a href="#example-usage" id="toc-example-usage" class="nav-link" data-scroll-target="#example-usage"><span class="header-section-number">6.5</span> Example Usage</a></li>
  </ul></li>
  <li><a href="#overall-differences" id="toc-overall-differences" class="nav-link" data-scroll-target="#overall-differences"><span class="header-section-number">7</span> Overall differences</a></li>
  <li><a href="#detect-matches" id="toc-detect-matches" class="nav-link" data-scroll-target="#detect-matches"><span class="header-section-number">8</span> Detect matches</a>
  <ul class="collapse">
  <li><a href="#str_detect-detect-the-presence-or-absence-of-a-pattern-in-a-string" id="toc-str_detect-detect-the-presence-or-absence-of-a-pattern-in-a-string" class="nav-link" data-scroll-target="#str_detect-detect-the-presence-or-absence-of-a-pattern-in-a-string"><span class="header-section-number">8.1</span> <code>str_detect()</code>: Detect the presence or absence of a pattern in a string</a></li>
  <li><a href="#str_which-find-positions-matching-a-pattern" id="toc-str_which-find-positions-matching-a-pattern" class="nav-link" data-scroll-target="#str_which-find-positions-matching-a-pattern"><span class="header-section-number">8.2</span> <code>str_which()</code>: Find positions matching a pattern</a></li>
  <li><a href="#str_count-count-the-number-of-matches-in-a-string" id="toc-str_count-count-the-number-of-matches-in-a-string" class="nav-link" data-scroll-target="#str_count-count-the-number-of-matches-in-a-string"><span class="header-section-number">8.3</span> <code>str_count()</code>: Count the number of matches in a string</a></li>
  <li><a href="#str_locate-locate-the-position-of-patterns-in-a-string" id="toc-str_locate-locate-the-position-of-patterns-in-a-string" class="nav-link" data-scroll-target="#str_locate-locate-the-position-of-patterns-in-a-string"><span class="header-section-number">8.4</span> <code>str_locate()</code>: Locate the position of patterns in a string</a></li>
  <li><a href="#str_subset-keep-strings-matching-a-pattern-or-find-positions" id="toc-str_subset-keep-strings-matching-a-pattern-or-find-positions" class="nav-link" data-scroll-target="#str_subset-keep-strings-matching-a-pattern-or-find-positions"><span class="header-section-number">8.5</span> <code>str_subset()</code>: Keep strings matching a pattern, or find positions</a></li>
  <li><a href="#str_extract-extract-matching-patterns-from-a-string" id="toc-str_extract-extract-matching-patterns-from-a-string" class="nav-link" data-scroll-target="#str_extract-extract-matching-patterns-from-a-string"><span class="header-section-number">8.6</span> <code>str_extract()</code>: Extract matching patterns from a string</a></li>
  <li><a href="#str_match-extract-matched-groups-from-a-string" id="toc-str_match-extract-matched-groups-from-a-string" class="nav-link" data-scroll-target="#str_match-extract-matched-groups-from-a-string"><span class="header-section-number">8.7</span> <code>str_match()</code>: Extract matched groups from a string</a></li>
  </ul></li>
  <li><a href="#manage-lengths" id="toc-manage-lengths" class="nav-link" data-scroll-target="#manage-lengths"><span class="header-section-number">9</span> Manage lengths</a>
  <ul class="collapse">
  <li><a href="#str_length-the-length-of-a-string" id="toc-str_length-the-length-of-a-string" class="nav-link" data-scroll-target="#str_length-the-length-of-a-string"><span class="header-section-number">9.1</span> <code>str_length()</code>: The length of a string</a></li>
  <li><a href="#str_pad-pad-a-string" id="toc-str_pad-pad-a-string" class="nav-link" data-scroll-target="#str_pad-pad-a-string"><span class="header-section-number">9.2</span> <code>str_pad()</code>: Pad a string</a></li>
  <li><a href="#str_trunc-truncate-a-character-string" id="toc-str_trunc-truncate-a-character-string" class="nav-link" data-scroll-target="#str_trunc-truncate-a-character-string"><span class="header-section-number">9.3</span> <code>str_trunc()</code>: Truncate a character string</a></li>
  <li><a href="#str_trim-trim-whitespace-from-a-string" id="toc-str_trim-trim-whitespace-from-a-string" class="nav-link" data-scroll-target="#str_trim-trim-whitespace-from-a-string"><span class="header-section-number">9.4</span> <code>str_trim()</code>: Trim whitespace from a string</a></li>
  <li><a href="#str_wrap-wrap-strings-into-nicely-formatted-paragraphs" id="toc-str_wrap-wrap-strings-into-nicely-formatted-paragraphs" class="nav-link" data-scroll-target="#str_wrap-wrap-strings-into-nicely-formatted-paragraphs"><span class="header-section-number">9.5</span> <code>str_wrap()</code>: Wrap strings into nicely formatted paragraphs</a></li>
  </ul></li>
  <li><a href="#mutate-strings" id="toc-mutate-strings" class="nav-link" data-scroll-target="#mutate-strings"><span class="header-section-number">10</span> Mutate strings</a>
  <ul class="collapse">
  <li><a href="#str_replace-replace-matched-patterns-in-a-string" id="toc-str_replace-replace-matched-patterns-in-a-string" class="nav-link" data-scroll-target="#str_replace-replace-matched-patterns-in-a-string"><span class="header-section-number">10.1</span> <code>str_replace()</code>: Replace matched patterns in a string</a></li>
  <li><a href="#case-convert-case-of-a-string" id="toc-case-convert-case-of-a-string" class="nav-link" data-scroll-target="#case-convert-case-of-a-string"><span class="header-section-number">10.2</span> case: Convert case of a string</a></li>
  </ul></li>
  <li><a href="#join-and-split" id="toc-join-and-split" class="nav-link" data-scroll-target="#join-and-split"><span class="header-section-number">11</span> Join and split</a>
  <ul class="collapse">
  <li><a href="#str_flatten-flatten-a-string" id="toc-str_flatten-flatten-a-string" class="nav-link" data-scroll-target="#str_flatten-flatten-a-string"><span class="header-section-number">11.1</span> <code>str_flatten()</code>: Flatten a string</a></li>
  <li><a href="#str_dup-duplicate-strings-within-a-character-vector" id="toc-str_dup-duplicate-strings-within-a-character-vector" class="nav-link" data-scroll-target="#str_dup-duplicate-strings-within-a-character-vector"><span class="header-section-number">11.2</span> <code>str_dup()</code>: duplicate strings within a character vector</a></li>
  <li><a href="#str_split-split-up-a-string-into-pieces" id="toc-str_split-split-up-a-string-into-pieces" class="nav-link" data-scroll-target="#str_split-split-up-a-string-into-pieces"><span class="header-section-number">11.3</span> <code>str_split()</code>: Split up a string into pieces</a></li>
  <li><a href="#str_glue-interpolate-strings" id="toc-str_glue-interpolate-strings" class="nav-link" data-scroll-target="#str_glue-interpolate-strings"><span class="header-section-number">11.4</span> <code>str_glue()</code>: Interpolate strings</a></li>
  </ul></li>
  <li><a href="#order-strings" id="toc-order-strings" class="nav-link" data-scroll-target="#order-strings"><span class="header-section-number">12</span> Order strings</a>
  <ul class="collapse">
  <li><a href="#str_order-order-or-sort-a-character-vector" id="toc-str_order-order-or-sort-a-character-vector" class="nav-link" data-scroll-target="#str_order-order-or-sort-a-character-vector"><span class="header-section-number">12.1</span> <code>str_order()</code>: Order or sort a character vector</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">String Functions</span></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="string-functions-in-base-r" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> String Functions in Base R</h1>
<p>Strings (or character vectors) are a fundamental data type in R, and base R provides a variety of functions to manipulate and analyze strings. Here are some commonly used string functions in base R:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a character vector</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>text <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Hello, World!"</span>, <span class="st">"R is great"</span>, <span class="st">"Data Science"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<section id="basic-string-functions" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="basic-string-functions"><span class="header-section-number">6.1</span> Basic String Functions</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># nchar(): Returns the number of characters in a string</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nchar</span>(text)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 13 10 12</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tolower(): Converts a string to lowercase</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tolower</span>(text)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello, world!" "r is great"    "data science" </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># toupper(): Converts a string to uppercase</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">toupper</span>(text)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "HELLO, WORLD!" "R IS GREAT"    "DATA SCIENCE" </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># substr(): Extracts a substring from a string</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">substr</span>(text, <span class="at">start =</span> <span class="dv">1</span>, <span class="at">stop =</span> <span class="dv">5</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hello" "R is " "Data "</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># paste(): Concatenates strings together</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">"Hello"</span>, <span class="st">"R"</span>, <span class="at">sep =</span> <span class="st">" "</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hello R"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># paste0(): Concatenates strings without any separator</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"Hello"</span>, <span class="st">"R"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "HelloR"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># trimws(): Trims leading and trailing whitespace from a string</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">trimws</span>(<span class="st">"   Hello, World!   "</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hello, World!"</code></pre>
</div>
</div>
</section>
<section id="pattern-matching-and-replacement" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="pattern-matching-and-replacement"><span class="header-section-number">6.2</span> Pattern Matching and Replacement</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># grep(): Searches for patterns in a character vector and returns the indices of matches</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">"R"</span>, text)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># grepl(): Searches for patterns and returns a logical vector indicating matches</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"R"</span>, text)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE FALSE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sub(): Replaces the first occurrence of a pattern in a string</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sub</span>(<span class="st">"great"</span>, <span class="st">"awesome"</span>, text)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hello, World!" "R is awesome"  "Data Science" </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># gsub(): Replaces all occurrences of a pattern in a string</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"_"</span>, text)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hello,_World!" "R_is_great"    "Data_Science" </code></pre>
</div>
</div>
</section>
<section id="string-splitting-and-joining" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="string-splitting-and-joining"><span class="header-section-number">6.3</span> String Splitting and Joining</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># strsplit(): Splits a string into substrings based on a specified delimiter</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">strsplit</span>(text, <span class="at">split =</span> <span class="st">" "</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "Hello," "World!"

[[2]]
[1] "R"     "is"    "great"

[[3]]
[1] "Data"    "Science"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># unlist(): Converts a list to a vector (useful after strsplit)</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unlist</span>(<span class="fu">strsplit</span>(text, <span class="at">split =</span> <span class="st">" "</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hello,"  "World!"  "R"       "is"      "great"   "Data"    "Science"</code></pre>
</div>
</div>
</section>
<section id="regular-expressions" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="regular-expressions"><span class="header-section-number">6.4</span> Regular Expressions</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># regexpr(): Finds the position of the first match of a pattern in a string</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">regexpr</span>(<span class="st">"R"</span>, text)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1  1 -1
attr(,"match.length")
[1] -1  1 -1
attr(,"index.type")
[1] "chars"
attr(,"useBytes")
[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># gregexpr(): Finds the positions of all matches of a pattern in a string</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gregexpr</span>(<span class="st">" "</span>, text)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 7
attr(,"match.length")
[1] 1
attr(,"index.type")
[1] "chars"
attr(,"useBytes")
[1] TRUE

[[2]]
[1] 2 5
attr(,"match.length")
[1] 1 1
attr(,"index.type")
[1] "chars"
attr(,"useBytes")
[1] TRUE

[[3]]
[1] 5
attr(,"match.length")
[1] 1
attr(,"index.type")
[1] "chars"
attr(,"useBytes")
[1] TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># regmatches(): Extracts the matched substrings based on the positions returned by regexpr or gregexpr</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">regmatches</span>(text, <span class="fu">gregexpr</span>(<span class="st">" "</span>, text))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] " "

[[2]]
[1] " " " "

[[3]]
[1] " "</code></pre>
</div>
</div>
</section>
<section id="example-usage" class="level2" data-number="6.5">
<h2 data-number="6.5" class="anchored" data-anchor-id="example-usage"><span class="header-section-number">6.5</span> Example Usage</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: Convert text to lowercase and replace spaces with underscores</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>cleaned_text <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"_"</span>, text))</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>cleaned_text</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello,_world!" "r_is_great"    "data_science" </code></pre>
</div>
</div>
<p>These functions provide a solid foundation for string manipulation in R. For more advanced string operations, you # using the <code>stringr</code> package, which offers a more consistent and user-friendly interface for string handling.</p>
</section>
</section>
<section id="overall-differences" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Overall differences</h1>
<p>We’ll begin with a lookup table between the most important stringr functions and their base R equivalents.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>data_stringr_base_diff <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tribble</span>(</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>stringr,                                        <span class="sc">~</span>base_r,</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_detect(string, pattern)"</span>,                   <span class="st">"grepl(pattern, x)"</span>,</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_dup(string, times)"</span>,                        <span class="st">"strrep(x, times)"</span>,</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_extract(string, pattern)"</span>,                  <span class="st">"regmatches(x, m = regexpr(pattern, text))"</span>,</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_extract_all(string, pattern)"</span>,              <span class="st">"regmatches(x, m = gregexpr(pattern, text))"</span>,</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_length(string)"</span>,                            <span class="st">"nchar(x)"</span>,</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_locate(string, pattern)"</span>,                   <span class="st">"regexpr(pattern, text)"</span>,</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_locate_all(string, pattern)"</span>,               <span class="st">"gregexpr(pattern, text)"</span>,</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_match(string, pattern)"</span>,                    <span class="st">"regmatches(x, m = regexec(pattern, text))"</span>,</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_order(string)"</span>,                             <span class="st">"order(...)"</span>,</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_replace(string, pattern, replacement)"</span>,     <span class="st">"sub(pattern, replacement, x)"</span>,</span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_replace_all(string, pattern, replacement)"</span>, <span class="st">"gsub(pattern, replacement, x)"</span>,</span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_sort(string)"</span>,                              <span class="st">"sort(x)"</span>,</span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_split(string, pattern)"</span>,                    <span class="st">"strsplit(x, split)"</span>,</span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_sub(string, start, end)"</span>,                   <span class="st">"substr(x, start, stop)"</span>,</span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_subset(string, pattern)"</span>,                   <span class="st">"grep(pattern, x, value = TRUE)"</span>,</span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_to_lower(string)"</span>,                          <span class="st">"tolower(x)"</span>,</span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_to_title(string)"</span>,                          <span class="st">"tools::toTitleCase(text)"</span>,</span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_to_upper(string)"</span>,                          <span class="st">"toupper(x)"</span>,</span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_trim(string)"</span>,                              <span class="st">"trimws(x)"</span>,</span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_which(string, pattern)"</span>,                    <span class="st">"grep(pattern, x)"</span>,</span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_wrap(string)"</span>,                              <span class="st">"strwrap(x)"</span></span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-27"><a href="#cb36-27" aria-hidden="true" tabindex="-1"></a><span class="co"># create MD table, arranged alphabetically by stringr fn name</span></span>
<span id="cb36-28"><a href="#cb36-28" aria-hidden="true" tabindex="-1"></a>data_stringr_base_diff <span class="sc">|&gt;</span> </span>
<span id="cb36-29"><a href="#cb36-29" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb36-30"><a href="#cb36-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols =</span> <span class="fu">everything</span>(),</span>
<span id="cb36-31"><a href="#cb36-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">paste0</span>(<span class="st">"`"</span>, .x, <span class="st">"`"</span>))</span>
<span id="cb36-32"><a href="#cb36-32" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb36-33"><a href="#cb36-33" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(stringr) <span class="sc">|&gt;</span> </span>
<span id="cb36-34"><a href="#cb36-34" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="st">`</span><span class="at">base R</span><span class="st">`</span> <span class="ot">=</span> base_r) <span class="sc">|&gt;</span> </span>
<span id="cb36-35"><a href="#cb36-35" aria-hidden="true" tabindex="-1"></a>  gt<span class="sc">::</span><span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb36-36"><a href="#cb36-36" aria-hidden="true" tabindex="-1"></a>  gt<span class="sc">::</span><span class="fu">fmt_markdown</span>(<span class="at">columns =</span> <span class="fu">everything</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb36-37"><a href="#cb36-37" aria-hidden="true" tabindex="-1"></a>  gt<span class="sc">::</span><span class="fu">tab_options</span>(<span class="at">column_labels.font.weight =</span> <span class="st">"bold"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div id="tewyfyemlo" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#tewyfyemlo table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#tewyfyemlo thead, #tewyfyemlo tbody, #tewyfyemlo tfoot, #tewyfyemlo tr, #tewyfyemlo td, #tewyfyemlo th {
  border-style: none;
}

#tewyfyemlo p {
  margin: 0;
  padding: 0;
}

#tewyfyemlo .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#tewyfyemlo .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#tewyfyemlo .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#tewyfyemlo .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#tewyfyemlo .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#tewyfyemlo .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tewyfyemlo .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#tewyfyemlo .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#tewyfyemlo .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: bold;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#tewyfyemlo .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#tewyfyemlo .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#tewyfyemlo .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#tewyfyemlo .gt_spanner_row {
  border-bottom-style: hidden;
}

#tewyfyemlo .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#tewyfyemlo .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#tewyfyemlo .gt_from_md > :first-child {
  margin-top: 0;
}

#tewyfyemlo .gt_from_md > :last-child {
  margin-bottom: 0;
}

#tewyfyemlo .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#tewyfyemlo .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#tewyfyemlo .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#tewyfyemlo .gt_row_group_first td {
  border-top-width: 2px;
}

#tewyfyemlo .gt_row_group_first th {
  border-top-width: 2px;
}

#tewyfyemlo .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#tewyfyemlo .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#tewyfyemlo .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#tewyfyemlo .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tewyfyemlo .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#tewyfyemlo .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#tewyfyemlo .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#tewyfyemlo .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#tewyfyemlo .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tewyfyemlo .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#tewyfyemlo .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#tewyfyemlo .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#tewyfyemlo .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#tewyfyemlo .gt_left {
  text-align: left;
}

#tewyfyemlo .gt_center {
  text-align: center;
}

#tewyfyemlo .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#tewyfyemlo .gt_font_normal {
  font-weight: normal;
}

#tewyfyemlo .gt_font_bold {
  font-weight: bold;
}

#tewyfyemlo .gt_font_italic {
  font-style: italic;
}

#tewyfyemlo .gt_super {
  font-size: 65%;
}

#tewyfyemlo .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#tewyfyemlo .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#tewyfyemlo .gt_indent_1 {
  text-indent: 5px;
}

#tewyfyemlo .gt_indent_2 {
  text-indent: 10px;
}

#tewyfyemlo .gt_indent_3 {
  text-indent: 15px;
}

#tewyfyemlo .gt_indent_4 {
  text-indent: 20px;
}

#tewyfyemlo .gt_indent_5 {
  text-indent: 25px;
}

#tewyfyemlo .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#tewyfyemlo div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-bootstrap="false">
<thead>
<tr class="gt_col_headings header">
<th id="stringr" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">stringr</th>
<th id="base-R" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">base R</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="stringr"><code>str_detect(string, pattern)</code></td>
<td class="gt_row gt_left" headers="base R"><code>grepl(pattern, x)</code></td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="stringr"><code>str_dup(string, times)</code></td>
<td class="gt_row gt_left" headers="base R"><code>strrep(x, times)</code></td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="stringr"><code>str_extract(string, pattern)</code></td>
<td class="gt_row gt_left" headers="base R"><code>regmatches(x, m = regexpr(pattern, text))</code></td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="stringr"><code>str_extract_all(string, pattern)</code></td>
<td class="gt_row gt_left" headers="base R"><code>regmatches(x, m = gregexpr(pattern, text))</code></td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="stringr"><code>str_length(string)</code></td>
<td class="gt_row gt_left" headers="base R"><code>nchar(x)</code></td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="stringr"><code>str_locate(string, pattern)</code></td>
<td class="gt_row gt_left" headers="base R"><code>regexpr(pattern, text)</code></td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="stringr"><code>str_locate_all(string, pattern)</code></td>
<td class="gt_row gt_left" headers="base R"><code>gregexpr(pattern, text)</code></td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="stringr"><code>str_match(string, pattern)</code></td>
<td class="gt_row gt_left" headers="base R"><code>regmatches(x, m = regexec(pattern, text))</code></td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="stringr"><code>str_order(string)</code></td>
<td class="gt_row gt_left" headers="base R"><code>order(...)</code></td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="stringr"><code>str_replace(string, pattern, replacement)</code></td>
<td class="gt_row gt_left" headers="base R"><code>sub(pattern, replacement, x)</code></td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="stringr"><code>str_replace_all(string, pattern, replacement)</code></td>
<td class="gt_row gt_left" headers="base R"><code>gsub(pattern, replacement, x)</code></td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="stringr"><code>str_sort(string)</code></td>
<td class="gt_row gt_left" headers="base R"><code>sort(x)</code></td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="stringr"><code>str_split(string, pattern)</code></td>
<td class="gt_row gt_left" headers="base R"><code>strsplit(x, split)</code></td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="stringr"><code>str_sub(string, start, end)</code></td>
<td class="gt_row gt_left" headers="base R"><code>substr(x, start, stop)</code></td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="stringr"><code>str_subset(string, pattern)</code></td>
<td class="gt_row gt_left" headers="base R"><code>grep(pattern, x, value = TRUE)</code></td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="stringr"><code>str_to_lower(string)</code></td>
<td class="gt_row gt_left" headers="base R"><code>tolower(x)</code></td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="stringr"><code>str_to_title(string)</code></td>
<td class="gt_row gt_left" headers="base R"><code>tools::toTitleCase(text)</code></td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="stringr"><code>str_to_upper(string)</code></td>
<td class="gt_row gt_left" headers="base R"><code>toupper(x)</code></td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="stringr"><code>str_trim(string)</code></td>
<td class="gt_row gt_left" headers="base R"><code>trimws(x)</code></td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="stringr"><code>str_which(string, pattern)</code></td>
<td class="gt_row gt_left" headers="base R"><code>grep(pattern, x)</code></td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="stringr"><code>str_wrap(string)</code></td>
<td class="gt_row gt_left" headers="base R"><code>strwrap(x)</code></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Overall the main differences between base R and stringr are:</p>
<ol type="1">
<li><p>stringr functions start with <code>str_</code> prefix; base R string functions have no consistent naming scheme.</p></li>
<li><p>The order of inputs is usually different between base R and stringr. In base R, the <code>pattern</code> to match usually comes first; in stringr, the <code>string</code> to manupulate always comes first. This makes stringr easier to use in pipes, and with <code>lapply()</code> or <code>purrr::map()</code>.</p></li>
<li><p>Functions in stringr tend to do less, where many of the string processing functions in base R have multiple purposes.</p></li>
<li><p>The output and input of stringr functions has been carefully designed. For example, the output of <code>str_locate()</code> can be fed directly into <code>str_sub()</code>; the same is not true of <code>regexpr()</code> and <code>substr()</code>.</p></li>
<li><p>Base functions use arguments (like <code>perl</code>, <code>fixed</code>, and <code>ignore.case</code>) to control how the pattern is interpreted. To avoid dependence between arguments, stringr instead uses helper functions (like <code>fixed()</code>, <code>regex()</code>, and <code>coll()</code>).</p></li>
</ol>
<p>Next we’ll walk through each of the functions, noting the similarities and important differences. These examples are adapted from the stringr documentation and here they are contrasted with the analogous base R operations.</p>
</section>
<section id="detect-matches" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Detect matches</h1>
<section id="str_detect-detect-the-presence-or-absence-of-a-pattern-in-a-string" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="str_detect-detect-the-presence-or-absence-of-a-pattern-in-a-string"><span class="header-section-number">8.1</span> <code>str_detect()</code>: Detect the presence or absence of a pattern in a string</h2>
<p>Suppose you want to know whether each word in a vector of fruit names contains an “a”.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>fruit <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"apple"</span>, <span class="st">"banana"</span>, <span class="st">"pear"</span>, <span class="st">"pineapple"</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="at">pattern =</span> <span class="st">"a"</span>, <span class="at">x =</span> fruit)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE TRUE TRUE TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co">#stringr</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_detect</span>(fruit, <span class="at">pattern =</span> <span class="st">"a"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE TRUE TRUE TRUE</code></pre>
</div>
</div>
<p>In base you would use <code>grepl()</code> (see the “l” and think logical) while in stringr you use <code>str_detect()</code> (see the verb “detect” and think of a yes/no action).</p>
</section>
<section id="str_which-find-positions-matching-a-pattern" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="str_which-find-positions-matching-a-pattern"><span class="header-section-number">8.2</span> <code>str_which()</code>: Find positions matching a pattern</h2>
<p>Now you want to identify the positions of the words in a vector of fruit names that contain an “a”.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="at">pattern =</span> <span class="st">"a"</span>, <span class="at">x =</span> fruit)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_which</span>(fruit, <span class="at">pattern =</span> <span class="st">"a"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4</code></pre>
</div>
</div>
<p>In base you would use <code>grep()</code> while in stringr you use <code>str_which()</code> (by analogy to <code>which()</code>).</p>
</section>
<section id="str_count-count-the-number-of-matches-in-a-string" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="str_count-count-the-number-of-matches-in-a-string"><span class="header-section-number">8.3</span> <code>str_count()</code>: Count the number of matches in a string</h2>
<p>How many “a”s are in each fruit?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># base </span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>loc <span class="ot">&lt;-</span> <span class="fu">gregexpr</span>(<span class="at">pattern =</span> <span class="st">"a"</span>, <span class="at">text =</span> fruit, <span class="at">fixed =</span> <span class="cn">TRUE</span>)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(loc, <span class="cf">function</span>(x) <span class="fu">length</span>(<span class="fu">attr</span>(x, <span class="st">"match.length"</span>)))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 3 1 1</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_count</span>(fruit, <span class="at">pattern =</span> <span class="st">"a"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 3 1 1</code></pre>
</div>
</div>
<p>This information can be gleaned from <code>gregexpr()</code> in base, but you need to look at the <code>match.length</code> attribute as the vector uses a length-1 integer vector (<code>-1</code>) to indicate no match.</p>
</section>
<section id="str_locate-locate-the-position-of-patterns-in-a-string" class="level2" data-number="8.4">
<h2 data-number="8.4" class="anchored" data-anchor-id="str_locate-locate-the-position-of-patterns-in-a-string"><span class="header-section-number">8.4</span> <code>str_locate()</code>: Locate the position of patterns in a string</h2>
<p>Within each fruit, where does the first “p” occur? Where are all of the “p”s?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>fruit3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"papaya"</span>, <span class="st">"lime"</span>, <span class="st">"apple"</span>)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="fu">gregexpr</span>(<span class="at">pattern =</span> <span class="st">"p"</span>, <span class="at">text =</span> fruit3))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 3
 $ : int [1:2] 1 3
  ..- attr(*, "match.length")= int [1:2] 1 1
  ..- attr(*, "index.type")= chr "chars"
  ..- attr(*, "useBytes")= logi TRUE
 $ : int -1
  ..- attr(*, "match.length")= int -1
  ..- attr(*, "index.type")= chr "chars"
  ..- attr(*, "useBytes")= logi TRUE
 $ : int [1:2] 2 3
  ..- attr(*, "match.length")= int [1:2] 1 1
  ..- attr(*, "index.type")= chr "chars"
  ..- attr(*, "useBytes")= logi TRUE</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_locate</span>(fruit3, <span class="at">pattern =</span> <span class="st">"p"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>     start end
[1,]     1   1
[2,]    NA  NA
[3,]     2   2</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_locate_all</span>(fruit3, <span class="at">pattern =</span> <span class="st">"p"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
     start end
[1,]     1   1
[2,]     3   3

[[2]]
     start end

[[3]]
     start end
[1,]     2   2
[2,]     3   3</code></pre>
</div>
</div>
</section>
<section id="str_subset-keep-strings-matching-a-pattern-or-find-positions" class="level2" data-number="8.5">
<h2 data-number="8.5" class="anchored" data-anchor-id="str_subset-keep-strings-matching-a-pattern-or-find-positions"><span class="header-section-number">8.5</span> <code>str_subset()</code>: Keep strings matching a pattern, or find positions</h2>
<p>We may want to retrieve strings that contain a pattern of interest:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="at">pattern =</span> <span class="st">"g"</span>, <span class="at">x =</span> fruit, <span class="at">value =</span> <span class="cn">TRUE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>character(0)</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_subset</span>(fruit, <span class="at">pattern =</span> <span class="st">"g"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>character(0)</code></pre>
</div>
</div>
</section>
<section id="str_extract-extract-matching-patterns-from-a-string" class="level2" data-number="8.6">
<h2 data-number="8.6" class="anchored" data-anchor-id="str_extract-extract-matching-patterns-from-a-string"><span class="header-section-number">8.6</span> <code>str_extract()</code>: Extract matching patterns from a string</h2>
<p>We may want to pick out certain patterns from a string, for example, the digits in a shopping list:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>shopping_list <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"apples x4"</span>, <span class="st">"bag of flour"</span>, <span class="st">"10"</span>, <span class="st">"milk x2"</span>)</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>matches <span class="ot">&lt;-</span> <span class="fu">regexpr</span>(<span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">d+"</span>, <span class="at">text =</span> shopping_list) <span class="co"># digits</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="fu">regmatches</span>(shopping_list, <span class="at">m =</span> matches)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "4"  "10" "2" </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>matches <span class="ot">&lt;-</span> <span class="fu">gregexpr</span>(<span class="at">pattern =</span> <span class="st">"[a-z]+"</span>, <span class="at">text =</span> shopping_list) <span class="co"># words</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">regmatches</span>(shopping_list, <span class="at">m =</span> matches)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "apples" "x"     

[[2]]
[1] "bag"   "of"    "flour"

[[3]]
character(0)

[[4]]
[1] "milk" "x"   </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract</span>(shopping_list, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">d+"</span>) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "4"  NA   "10" "2" </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(shopping_list, <span class="st">"[a-z]+"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "apples" "x"     

[[2]]
[1] "bag"   "of"    "flour"

[[3]]
character(0)

[[4]]
[1] "milk" "x"   </code></pre>
</div>
</div>
<p>Base R requires the combination of <code>regexpr()</code> with <code>regmatches()</code>; but note that the strings without matches are dropped from the output. stringr provides <code>str_extract()</code> and <code>str_extract_all()</code>, and the output is always the same length as the input.</p>
</section>
<section id="str_match-extract-matched-groups-from-a-string" class="level2" data-number="8.7">
<h2 data-number="8.7" class="anchored" data-anchor-id="str_match-extract-matched-groups-from-a-string"><span class="header-section-number">8.7</span> <code>str_match()</code>: Extract matched groups from a string</h2>
<p>We may also want to extract groups from a string. Here I’m going to use the scenario from Section 14.4.3 in <a href="https://r4ds.had.co.nz/strings.html">R for Data Science</a>.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sentences)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The birch canoe slid on the smooth planks." 
[2] "Glue the sheet to the dark blue background."
[3] "It's easy to tell the depth of a well."     
[4] "These days a chicken leg is a rare dish."   
[5] "Rice is often served in round bowls."       
[6] "The juice of lemons makes fine punch."      </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>noun <span class="ot">&lt;-</span> <span class="st">"([A]a|[Tt]he) ([^ ]+)"</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>matches <span class="ot">&lt;-</span> <span class="fu">regexec</span>(<span class="at">pattern =</span> noun, <span class="at">text =</span> <span class="fu">head</span>(sentences))</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a><span class="fu">do.call</span>(<span class="st">"rbind"</span>, <span class="fu">regmatches</span>(<span class="at">x =</span> <span class="fu">head</span>(sentences), <span class="at">m =</span> matches))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]        [,2]  [,3]   
[1,] "The birch" "The" "birch"
[2,] "the sheet" "the" "sheet"
[3,] "the depth" "the" "depth"
[4,] "The juice" "The" "juice"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_match</span>(<span class="fu">head</span>(sentences), <span class="at">pattern =</span> noun)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]        [,2]  [,3]   
[1,] "The birch" "The" "birch"
[2,] "the sheet" "the" "sheet"
[3,] "the depth" "the" "depth"
[4,] NA          NA    NA     
[5,] NA          NA    NA     
[6,] "The juice" "The" "juice"</code></pre>
</div>
</div>
<p>As for extracting the full match base R requires the combination of two functions, and inputs with no matches are dropped from the output.</p>
</section>
</section>
<section id="manage-lengths" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Manage lengths</h1>
<section id="str_length-the-length-of-a-string" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="str_length-the-length-of-a-string"><span class="header-section-number">9.1</span> <code>str_length()</code>: The length of a string</h2>
<p>To determine the length of a string, base R uses <code>nchar()</code> (not to be confused with <code>length()</code> which gives the length of vectors, etc.) while stringr uses <code>str_length()</code>.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nchar</span>(letters)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(letters)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1</code></pre>
</div>
</div>
<p>There are some subtle differences between base and stringr here. <code>nchar()</code> requires a character vector, so it will return an error if used on a factor. <code>str_length()</code> can handle a factor input.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nchar</span>(<span class="fu">factor</span>(<span class="st">"abc"</span>)) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-error">
<pre><code>Error in nchar(factor("abc")): 'nchar()' requires a character vector</code></pre>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(<span class="fu">factor</span>(<span class="st">"abc"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<p>Note that “characters” is a poorly defined concept, and technically both <code>nchar()</code> and <code>str_length()</code> returns the number of code points. This is usually the same as what you’d consider to be a charcter, but not always:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"\u00fc"</span>, <span class="st">"u\u0308"</span>)</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ü" "ü"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nchar</span>(x)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(x)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2</code></pre>
</div>
</div>
</section>
<section id="str_pad-pad-a-string" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="str_pad-pad-a-string"><span class="header-section-number">9.2</span> <code>str_pad()</code>: Pad a string</h2>
<p>To pad a string to a certain width, use stringr’s <code>str_pad()</code>. In base R you could use <code>sprintf()</code>, but unlike <code>str_pad()</code>, <code>sprintf()</code> has many other functionalities.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">"%30s"</span>, <span class="st">"Sriram"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "                        Sriram"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">"%-30s"</span>, <span class="st">"Sriram"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Sriram                        "</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># "both" is not as straightforward</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(</span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_pad</span>(<span class="st">"Sriram"</span>, <span class="dv">30</span>, <span class="st">"left"</span>),</span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_pad</span>(<span class="st">"Sriram"</span>, <span class="dv">30</span>, <span class="st">"right"</span>),</span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_pad</span>(<span class="st">"Sriram"</span>, <span class="dv">30</span>, <span class="st">"both"</span>)</span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]                            
[1,] "                        Sriram"
[2,] "Sriram                        "
[3,] "            Sriram            "</code></pre>
</div>
</div>
</section>
<section id="str_trunc-truncate-a-character-string" class="level2" data-number="9.3">
<h2 data-number="9.3" class="anchored" data-anchor-id="str_trunc-truncate-a-character-string"><span class="header-section-number">9.3</span> <code>str_trunc()</code>: Truncate a character string</h2>
<p>The stringr package provides an easy way to truncate a character string: <code>str_trunc()</code>. Base R has no function to do this directly.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">"This string is moderately long"</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(</span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_trunc</span>(x, <span class="dv">20</span>, <span class="st">"right"</span>),</span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_trunc</span>(x, <span class="dv">20</span>, <span class="st">"left"</span>),</span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_trunc</span>(x, <span class="dv">20</span>, <span class="st">"center"</span>)</span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]                  
[1,] "This string is mo..."
[2,] "...s moderately long"
[3,] "This stri...ely long"</code></pre>
</div>
</div>
</section>
<section id="str_trim-trim-whitespace-from-a-string" class="level2" data-number="9.4">
<h2 data-number="9.4" class="anchored" data-anchor-id="str_trim-trim-whitespace-from-a-string"><span class="header-section-number">9.4</span> <code>str_trim()</code>: Trim whitespace from a string</h2>
<p>Similarly, stringr provides <code>str_trim()</code> to trim whitespace from a string. This is analogous to base R’s <code>trimws()</code> added in R 3.3.0.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="fu">trimws</span>(<span class="st">" String with trailing and leading white space</span><span class="sc">\t</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "String with trailing and leading white space"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">trimws</span>(<span class="st">"</span><span class="sc">\n\n</span><span class="st">String with trailing and leading white space</span><span class="sc">\n\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "String with trailing and leading white space"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_trim</span>(<span class="st">" String with trailing and leading white space</span><span class="sc">\t</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "String with trailing and leading white space"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_trim</span>(<span class="st">"</span><span class="sc">\n\n</span><span class="st">String with trailing and leading white space</span><span class="sc">\n\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "String with trailing and leading white space"</code></pre>
</div>
</div>
<p>The stringr function <code>str_squish()</code> allows for extra whitespace within a string to be trimmed (in contrast to <code>str_trim()</code> which removes whitespace at the beginning and/or end of string). In base R, one might take advantage of <code>gsub()</code> to accomplish the same effect.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_squish</span>(<span class="st">" String with trailing, middle,   and leading white space</span><span class="sc">\t</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "String with trailing, middle, and leading white space"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_squish</span>(<span class="st">"</span><span class="sc">\n\n</span><span class="st">String with excess, trailing and leading white space</span><span class="sc">\n\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "String with excess, trailing and leading white space"</code></pre>
</div>
</div>
</section>
<section id="str_wrap-wrap-strings-into-nicely-formatted-paragraphs" class="level2" data-number="9.5">
<h2 data-number="9.5" class="anchored" data-anchor-id="str_wrap-wrap-strings-into-nicely-formatted-paragraphs"><span class="header-section-number">9.5</span> <code>str_wrap()</code>: Wrap strings into nicely formatted paragraphs</h2>
<p><code>strwrap()</code> and <code>str_wrap()</code> use different algorithms. <code>str_wrap()</code> uses the famous <a href="http://litherum.blogspot.com/2015/07/knuth-plass-line-breaking-algorithm.html">Knuth-Plass algorithm</a>.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>gettysburg <span class="ot">&lt;-</span> <span class="st">"Four score and seven years ago our fathers brought forth on this continent, a new nation, conceived in Liberty, and dedicated to the proposition that all men are created equal."</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">strwrap</span>(gettysburg, <span class="at">width =</span> <span class="dv">60</span>), <span class="at">sep =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Four score and seven years ago our fathers brought forth on
this continent, a new nation, conceived in Liberty, and
dedicated to the proposition that all men are created
equal.</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">str_wrap</span>(gettysburg, <span class="at">width =</span> <span class="dv">60</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Four score and seven years ago our fathers brought forth
on this continent, a new nation, conceived in Liberty, and
dedicated to the proposition that all men are created equal. </code></pre>
</div>
</div>
<p>Note that <code>strwrap()</code> returns a character vector with one element for each line; <code>str_wrap()</code> returns a single string containing line breaks.</p>
</section>
</section>
<section id="mutate-strings" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> Mutate strings</h1>
<section id="str_replace-replace-matched-patterns-in-a-string" class="level2" data-number="10.1">
<h2 data-number="10.1" class="anchored" data-anchor-id="str_replace-replace-matched-patterns-in-a-string"><span class="header-section-number">10.1</span> <code>str_replace()</code>: Replace matched patterns in a string</h2>
<p>To replace certain patterns within a string, stringr provides the functions <code>str_replace()</code> and <code>str_replace_all()</code>. The base R equivalents are <code>sub()</code> and <code>gsub()</code>. Note the difference in default input order again.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>fruits <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"apple"</span>, <span class="st">"banana"</span>, <span class="st">"pear"</span>, <span class="st">"pineapple"</span>)</span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sub</span>(<span class="st">"[aeiou]"</span>, <span class="st">"-"</span>, fruits)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "-pple"     "b-nana"    "p-ar"      "p-neapple"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">"[aeiou]"</span>, <span class="st">"-"</span>, fruits)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "-ppl-"     "b-n-n-"    "p--r"      "p-n--ppl-"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(fruits, <span class="st">"[aeiou]"</span>, <span class="st">"-"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "-pple"     "b-nana"    "p-ar"      "p-neapple"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace_all</span>(fruits, <span class="st">"[aeiou]"</span>, <span class="st">"-"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "-ppl-"     "b-n-n-"    "p--r"      "p-n--ppl-"</code></pre>
</div>
</div>
</section>
<section id="case-convert-case-of-a-string" class="level2" data-number="10.2">
<h2 data-number="10.2" class="anchored" data-anchor-id="case-convert-case-of-a-string"><span class="header-section-number">10.2</span> case: Convert case of a string</h2>
<p>Both stringr and base R have functions to convert to upper and lower case. Title case is also provided in stringr.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>dog <span class="ot">&lt;-</span> <span class="st">"The quick brown dog"</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a><span class="fu">toupper</span>(dog)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "THE QUICK BROWN DOG"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tolower</span>(dog)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "the quick brown dog"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>tools<span class="sc">::</span><span class="fu">toTitleCase</span>(dog)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The Quick Brown Dog"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_upper</span>(dog)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "THE QUICK BROWN DOG"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_lower</span>(dog)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "the quick brown dog"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_title</span>(dog)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The Quick Brown Dog"</code></pre>
</div>
</div>
<p>In stringr we can control the locale, while in base R locale distinctions are controlled with global variables. Therefore, the output of your base R code may vary across different computers with different global settings.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_upper</span>(<span class="st">"i"</span>) <span class="co"># English</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "I"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_upper</span>(<span class="st">"i"</span>, <span class="at">locale =</span> <span class="st">"tr"</span>) <span class="co"># Turkish</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "İ"</code></pre>
</div>
</div>
</section>
</section>
<section id="join-and-split" class="level1" data-number="11">
<h1 data-number="11"><span class="header-section-number">11</span> Join and split</h1>
<section id="str_flatten-flatten-a-string" class="level2" data-number="11.1">
<h2 data-number="11.1" class="anchored" data-anchor-id="str_flatten-flatten-a-string"><span class="header-section-number">11.1</span> <code>str_flatten()</code>: Flatten a string</h2>
<p>If we want to take elements of a string vector and collapse them to a single string we can use the <code>collapse</code> argument in <code>paste()</code> or use stringr’s <code>str_flatten()</code>.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(letters, <span class="at">collapse =</span> <span class="st">"-"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "a-b-c-d-e-f-g-h-i-j-k-l-m-n-o-p-q-r-s-t-u-v-w-x-y-z"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_flatten</span>(letters, <span class="at">collapse =</span> <span class="st">"-"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "a-b-c-d-e-f-g-h-i-j-k-l-m-n-o-p-q-r-s-t-u-v-w-x-y-z"</code></pre>
</div>
</div>
<p>The advantage of <code>str_flatten()</code> is that it always returns a vector the same length as its input; to predict the return length of <code>paste()</code> you must carefully read all arguments.</p>
</section>
<section id="str_dup-duplicate-strings-within-a-character-vector" class="level2" data-number="11.2">
<h2 data-number="11.2" class="anchored" data-anchor-id="str_dup-duplicate-strings-within-a-character-vector"><span class="header-section-number">11.2</span> <code>str_dup()</code>: duplicate strings within a character vector</h2>
<p>To duplicate strings within a character vector use <code>strrep()</code> (in R 3.3.0 or greater) or <code>str_dup()</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>fruit <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"apple"</span>, <span class="st">"pear"</span>, <span class="st">"banana"</span>)</span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb139-4"><a href="#cb139-4" aria-hidden="true" tabindex="-1"></a><span class="fu">strrep</span>(fruit, <span class="dv">2</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "appleapple"   "pearpear"     "bananabanana"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">strrep</span>(fruit, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple"              "pearpear"           "bananabananabanana"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_dup</span>(fruit, <span class="dv">2</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "appleapple"   "pearpear"     "bananabanana"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_dup</span>(fruit, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple"              "pearpear"           "bananabananabanana"</code></pre>
</div>
</div>
</section>
<section id="str_split-split-up-a-string-into-pieces" class="level2" data-number="11.3">
<h2 data-number="11.3" class="anchored" data-anchor-id="str_split-split-up-a-string-into-pieces"><span class="header-section-number">11.3</span> <code>str_split()</code>: Split up a string into pieces</h2>
<p>To split a string into pieces with breaks based on a particular pattern match stringr uses <code>str_split()</code> and base R uses <code>strsplit()</code>. Unlike most other functions, <code>strsplit()</code> starts with the character vector to modify.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>fruits <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"apples and oranges and pears and bananas"</span>,</span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"pineapples and mangos and guavas"</span></span>
<span id="cb147-4"><a href="#cb147-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb147-5"><a href="#cb147-5" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb147-6"><a href="#cb147-6" aria-hidden="true" tabindex="-1"></a><span class="fu">strsplit</span>(fruits, <span class="st">" and "</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "apples"  "oranges" "pears"   "bananas"

[[2]]
[1] "pineapples" "mangos"     "guavas"    </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_split</span>(fruits, <span class="st">" and "</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "apples"  "oranges" "pears"   "bananas"

[[2]]
[1] "pineapples" "mangos"     "guavas"    </code></pre>
</div>
</div>
<p>The stringr package’s <code>str_split()</code> allows for more control over the split, including restricting the number of possible matches.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_split</span>(fruits, <span class="st">" and "</span>, <span class="at">n =</span> <span class="dv">3</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "apples"            "oranges"           "pears and bananas"

[[2]]
[1] "pineapples" "mangos"     "guavas"    </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_split</span>(fruits, <span class="st">" and "</span>, <span class="at">n =</span> <span class="dv">2</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "apples"                        "oranges and pears and bananas"

[[2]]
[1] "pineapples"        "mangos and guavas"</code></pre>
</div>
</div>
</section>
<section id="str_glue-interpolate-strings" class="level2" data-number="11.4">
<h2 data-number="11.4" class="anchored" data-anchor-id="str_glue-interpolate-strings"><span class="header-section-number">11.4</span> <code>str_glue()</code>: Interpolate strings</h2>
<p>It’s often useful to interpolate varying values into a fixed string. In base R, you can use <code>sprintf()</code> for this purpose; stringr provides a wrapper for the more general purpose <a href="https://glue.tidyverse.org">glue</a> package.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>name <span class="ot">&lt;-</span> <span class="st">"Fred"</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>age <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a>anniversary <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"1991-10-12"</span>)</span>
<span id="cb155-4"><a href="#cb155-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-5"><a href="#cb155-5" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb155-6"><a href="#cb155-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(</span>
<span id="cb155-7"><a href="#cb155-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"My name is %s my age next year is %s and my anniversary is %s."</span>, </span>
<span id="cb155-8"><a href="#cb155-8" aria-hidden="true" tabindex="-1"></a>  name,</span>
<span id="cb155-9"><a href="#cb155-9" aria-hidden="true" tabindex="-1"></a>  age <span class="sc">+</span> <span class="dv">1</span>,</span>
<span id="cb155-10"><a href="#cb155-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format</span>(anniversary, <span class="st">"%A, %B %d, %Y"</span>)</span>
<span id="cb155-11"><a href="#cb155-11" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "My name is Fred my age next year is 51 and my anniversary is Saturday, October 12, 1991."</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_glue</span>(</span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"My name is {name}, "</span>,</span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"my age next year is {age + 1}, "</span>,</span>
<span id="cb157-5"><a href="#cb157-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"and my anniversary is {format(anniversary, '%A, %B %d, %Y')}."</span></span>
<span id="cb157-6"><a href="#cb157-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>My name is Fred, my age next year is 51, and my anniversary is Saturday, October 12, 1991.</code></pre>
</div>
</div>
</section>
</section>
<section id="order-strings" class="level1" data-number="12">
<h1 data-number="12"><span class="header-section-number">12</span> Order strings</h1>
<section id="str_order-order-or-sort-a-character-vector" class="level2" data-number="12.1">
<h2 data-number="12.1" class="anchored" data-anchor-id="str_order-order-or-sort-a-character-vector"><span class="header-section-number">12.1</span> <code>str_order()</code>: Order or sort a character vector</h2>
<p>Both base R and stringr have separate functions to order and sort strings.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a><span class="fu">order</span>(letters)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
[26] 26</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(letters)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s"
[20] "t" "u" "v" "w" "x" "y" "z"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_order</span>(letters)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
[26] 26</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sort</span>(letters)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s"
[20] "t" "u" "v" "w" "x" "y" "z"</code></pre>
</div>
</div>
<p>Some options in <code>str_order()</code> and <code>str_sort()</code> don’t have analogous base R options. For example, the stringr functions have a <code>locale</code> argument to control how to order or sort. In base R the locale is a global setting, so the outputs of <code>sort()</code> and <code>order()</code> may differ across different computers. For example, in the Norwegian alphabet, å comes after z:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"å"</span>, <span class="st">"a"</span>, <span class="st">"z"</span>)</span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sort</span>(x)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "a" "å" "z"</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sort</span>(x, <span class="at">locale =</span> <span class="st">"no"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "a" "z" "å"</code></pre>
</div>
</div>
<p>The stringr functions also have a <code>numeric</code> argument to sort digits numerically instead of treating them as strings.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"100a10"</span>, <span class="st">"100a5"</span>, <span class="st">"2b"</span>, <span class="st">"2a"</span>)</span>
<span id="cb171-3"><a href="#cb171-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sort</span>(x)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "100a10" "100a5"  "2a"     "2b"    </code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sort</span>(x, <span class="at">numeric =</span> <span class="cn">TRUE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2a"     "2b"     "100a5"  "100a10"</code></pre>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a>ae <span class="ot">&lt;-</span> haven<span class="sc">::</span><span class="fu">read_sas</span>(<span class="st">"./data/sdtm/ae.sas7bdat"</span>)</span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a>ae1 <span class="ot">&lt;-</span> ae <span class="sc">|&gt;</span> </span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span> (USUBJID,AEDECOD,AEBODSYS)</span>
<span id="cb179-4"><a href="#cb179-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-5"><a href="#cb179-5" aria-hidden="true" tabindex="-1"></a><span class="co">#find function in sas, str_detect</span></span>
<span id="cb179-6"><a href="#cb179-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-7"><a href="#cb179-7" aria-hidden="true" tabindex="-1"></a>ae2 <span class="ot">&lt;-</span> ae1 <span class="sc">|&gt;</span> </span>
<span id="cb179-8"><a href="#cb179-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(AEDECOD,<span class="st">"HER"</span>))</span>
<span id="cb179-9"><a href="#cb179-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-10"><a href="#cb179-10" aria-hidden="true" tabindex="-1"></a>ae2 <span class="ot">&lt;-</span> ae1 <span class="sc">|&gt;</span> </span>
<span id="cb179-11"><a href="#cb179-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(AEDECOD,<span class="st">"^HIATUS "</span>)) <span class="co"># start of the string</span></span>
<span id="cb179-12"><a href="#cb179-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-13"><a href="#cb179-13" aria-hidden="true" tabindex="-1"></a>ae2 <span class="ot">&lt;-</span> ae1 <span class="sc">|&gt;</span> </span>
<span id="cb179-14"><a href="#cb179-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(AEDECOD,<span class="st">"HERNIA$"</span>)) <span class="co"># end of the string</span></span>
<span id="cb179-15"><a href="#cb179-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-16"><a href="#cb179-16" aria-hidden="true" tabindex="-1"></a><span class="co">#substr in sas</span></span>
<span id="cb179-17"><a href="#cb179-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-18"><a href="#cb179-18" aria-hidden="true" tabindex="-1"></a>ae2 <span class="ot">&lt;-</span> ae1 <span class="sc">|&gt;</span> </span>
<span id="cb179-19"><a href="#cb179-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">newvar1=</span><span class="fu">str_sub</span>(AEDECOD,<span class="dv">1</span>,<span class="dv">6</span>),</span>
<span id="cb179-20"><a href="#cb179-20" aria-hidden="true" tabindex="-1"></a>         <span class="at">newvar2=</span><span class="fu">str_sub</span>(AEDECOD,<span class="dv">2</span>,<span class="dv">6</span>),</span>
<span id="cb179-21"><a href="#cb179-21" aria-hidden="true" tabindex="-1"></a>         <span class="at">newvar3=</span><span class="fu">str_sub</span>(AEDECOD,<span class="sc">-</span><span class="dv">3</span>),</span>
<span id="cb179-22"><a href="#cb179-22" aria-hidden="true" tabindex="-1"></a>         <span class="at">newvar4=</span><span class="fu">str_length</span>(AEDECOD))</span>
<span id="cb179-23"><a href="#cb179-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-24"><a href="#cb179-24" aria-hidden="true" tabindex="-1"></a><span class="co">#cat function in sas , Str_c in r</span></span>
<span id="cb179-25"><a href="#cb179-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-26"><a href="#cb179-26" aria-hidden="true" tabindex="-1"></a>ae2 <span class="ot">&lt;-</span> ae1 <span class="sc">|&gt;</span> </span>
<span id="cb179-27"><a href="#cb179-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">newvar1=</span><span class="fu">str_c</span>(AEDECOD,AEBODSYS,<span class="at">sep=</span><span class="st">"/"</span>),</span>
<span id="cb179-28"><a href="#cb179-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">newvar2=</span><span class="fu">paste</span>(AEDECOD,AEBODSYS,<span class="at">sep=</span><span class="st">"/"</span>))</span>
<span id="cb179-29"><a href="#cb179-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-30"><a href="#cb179-30" aria-hidden="true" tabindex="-1"></a><span class="co"># scan function in sas, word in r</span></span>
<span id="cb179-31"><a href="#cb179-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-32"><a href="#cb179-32" aria-hidden="true" tabindex="-1"></a>ae2 <span class="ot">&lt;-</span> ae1 <span class="sc">|&gt;</span> </span>
<span id="cb179-33"><a href="#cb179-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">newvar1=</span><span class="fu">word</span>(AEDECOD,<span class="dv">1</span>),</span>
<span id="cb179-34"><a href="#cb179-34" aria-hidden="true" tabindex="-1"></a>         <span class="at">newvar2=</span><span class="fu">word</span>(AEDECOD,<span class="dv">2</span>))</span>
<span id="cb179-35"><a href="#cb179-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-36"><a href="#cb179-36" aria-hidden="true" tabindex="-1"></a><span class="co"># upper &amp; lower case</span></span>
<span id="cb179-37"><a href="#cb179-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-38"><a href="#cb179-38" aria-hidden="true" tabindex="-1"></a>ae2 <span class="ot">&lt;-</span> ae1 <span class="sc">|&gt;</span> </span>
<span id="cb179-39"><a href="#cb179-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">newvar1=</span><span class="fu">str_to_lower</span>(AEDECOD),</span>
<span id="cb179-40"><a href="#cb179-40" aria-hidden="true" tabindex="-1"></a>         <span class="at">newvar2=</span><span class="fu">str_to_upper</span>(AEDECOD),</span>
<span id="cb179-41"><a href="#cb179-41" aria-hidden="true" tabindex="-1"></a>         <span class="at">newvar3=</span><span class="fu">str_to_title</span>(AEDECOD),</span>
<span id="cb179-42"><a href="#cb179-42" aria-hidden="true" tabindex="-1"></a>         <span class="at">newvar4=</span><span class="fu">str_to_sentence</span>(AEDECOD))</span>
<span id="cb179-43"><a href="#cb179-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-44"><a href="#cb179-44" aria-hidden="true" tabindex="-1"></a><span class="co">#str_trim</span></span>
<span id="cb179-45"><a href="#cb179-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-46"><a href="#cb179-46" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="st">"  this is    my String   "</span></span>
<span id="cb179-47"><a href="#cb179-47" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">str_trim</span>(a)</span>
<span id="cb179-48"><a href="#cb179-48" aria-hidden="true" tabindex="-1"></a>c <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(a,<span class="st">" "</span>,<span class="st">" "</span>)</span>
<span id="cb179-49"><a href="#cb179-49" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">str_squish</span>(a)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>


<!-- -->

</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./03-manipulating-vectors-dataframes-lists.html" class="pagination-link" aria-label="Manipulating Vectors, Data Frames, and Lists">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Manipulating Vectors, Data Frames, and Lists</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./04-reading-sas.html" class="pagination-link" aria-label="Reading SAS Datasets (+ Cleaning)">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Reading SAS Datasets (+ Cleaning)</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb180" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "String Functions"</span></span>
<span id="cb180-3"><a href="#cb180-3" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb180-4"><a href="#cb180-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-5"><a href="#cb180-5" aria-hidden="true" tabindex="-1"></a><span class="fu"># String Functions in Base R</span></span>
<span id="cb180-6"><a href="#cb180-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-7"><a href="#cb180-7" aria-hidden="true" tabindex="-1"></a>Strings (or character vectors) are a fundamental data type in R, and base R provides a variety of functions to manipulate and analyze strings. Here are some commonly used string functions in base R:</span>
<span id="cb180-8"><a href="#cb180-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-11"><a href="#cb180-11" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-12"><a href="#cb180-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a character vector</span></span>
<span id="cb180-13"><a href="#cb180-13" aria-hidden="true" tabindex="-1"></a>text <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Hello, World!"</span>, <span class="st">"R is great"</span>, <span class="st">"Data Science"</span>)</span>
<span id="cb180-14"><a href="#cb180-14" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-15"><a href="#cb180-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-16"><a href="#cb180-16" aria-hidden="true" tabindex="-1"></a><span class="fu">## Basic String Functions</span></span>
<span id="cb180-17"><a href="#cb180-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-20"><a href="#cb180-20" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-21"><a href="#cb180-21" aria-hidden="true" tabindex="-1"></a><span class="co"># nchar(): Returns the number of characters in a string</span></span>
<span id="cb180-22"><a href="#cb180-22" aria-hidden="true" tabindex="-1"></a><span class="fu">nchar</span>(text)</span>
<span id="cb180-23"><a href="#cb180-23" aria-hidden="true" tabindex="-1"></a><span class="co"># tolower(): Converts a string to lowercase</span></span>
<span id="cb180-24"><a href="#cb180-24" aria-hidden="true" tabindex="-1"></a><span class="fu">tolower</span>(text)</span>
<span id="cb180-25"><a href="#cb180-25" aria-hidden="true" tabindex="-1"></a><span class="co"># toupper(): Converts a string to uppercase</span></span>
<span id="cb180-26"><a href="#cb180-26" aria-hidden="true" tabindex="-1"></a><span class="fu">toupper</span>(text)</span>
<span id="cb180-27"><a href="#cb180-27" aria-hidden="true" tabindex="-1"></a><span class="co"># substr(): Extracts a substring from a string</span></span>
<span id="cb180-28"><a href="#cb180-28" aria-hidden="true" tabindex="-1"></a><span class="fu">substr</span>(text, <span class="at">start =</span> <span class="dv">1</span>, <span class="at">stop =</span> <span class="dv">5</span>)</span>
<span id="cb180-29"><a href="#cb180-29" aria-hidden="true" tabindex="-1"></a><span class="co"># paste(): Concatenates strings together</span></span>
<span id="cb180-30"><a href="#cb180-30" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">"Hello"</span>, <span class="st">"R"</span>, <span class="at">sep =</span> <span class="st">" "</span>)</span>
<span id="cb180-31"><a href="#cb180-31" aria-hidden="true" tabindex="-1"></a><span class="co"># paste0(): Concatenates strings without any separator</span></span>
<span id="cb180-32"><a href="#cb180-32" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"Hello"</span>, <span class="st">"R"</span>)</span>
<span id="cb180-33"><a href="#cb180-33" aria-hidden="true" tabindex="-1"></a><span class="co"># trimws(): Trims leading and trailing whitespace from a string</span></span>
<span id="cb180-34"><a href="#cb180-34" aria-hidden="true" tabindex="-1"></a><span class="fu">trimws</span>(<span class="st">"   Hello, World!   "</span>)</span>
<span id="cb180-35"><a href="#cb180-35" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-36"><a href="#cb180-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-37"><a href="#cb180-37" aria-hidden="true" tabindex="-1"></a><span class="fu">## Pattern Matching and Replacement</span></span>
<span id="cb180-38"><a href="#cb180-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-41"><a href="#cb180-41" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-42"><a href="#cb180-42" aria-hidden="true" tabindex="-1"></a><span class="co"># grep(): Searches for patterns in a character vector and returns the indices of matches</span></span>
<span id="cb180-43"><a href="#cb180-43" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="st">"R"</span>, text)</span>
<span id="cb180-44"><a href="#cb180-44" aria-hidden="true" tabindex="-1"></a><span class="co"># grepl(): Searches for patterns and returns a logical vector indicating matches</span></span>
<span id="cb180-45"><a href="#cb180-45" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">"R"</span>, text)</span>
<span id="cb180-46"><a href="#cb180-46" aria-hidden="true" tabindex="-1"></a><span class="co"># sub(): Replaces the first occurrence of a pattern in a string</span></span>
<span id="cb180-47"><a href="#cb180-47" aria-hidden="true" tabindex="-1"></a><span class="fu">sub</span>(<span class="st">"great"</span>, <span class="st">"awesome"</span>, text)</span>
<span id="cb180-48"><a href="#cb180-48" aria-hidden="true" tabindex="-1"></a><span class="co"># gsub(): Replaces all occurrences of a pattern in a string</span></span>
<span id="cb180-49"><a href="#cb180-49" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"_"</span>, text)</span>
<span id="cb180-50"><a href="#cb180-50" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-51"><a href="#cb180-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-52"><a href="#cb180-52" aria-hidden="true" tabindex="-1"></a><span class="fu">## String Splitting and Joining</span></span>
<span id="cb180-53"><a href="#cb180-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-56"><a href="#cb180-56" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-57"><a href="#cb180-57" aria-hidden="true" tabindex="-1"></a><span class="co"># strsplit(): Splits a string into substrings based on a specified delimiter</span></span>
<span id="cb180-58"><a href="#cb180-58" aria-hidden="true" tabindex="-1"></a><span class="fu">strsplit</span>(text, <span class="at">split =</span> <span class="st">" "</span>)</span>
<span id="cb180-59"><a href="#cb180-59" aria-hidden="true" tabindex="-1"></a><span class="co"># unlist(): Converts a list to a vector (useful after strsplit)</span></span>
<span id="cb180-60"><a href="#cb180-60" aria-hidden="true" tabindex="-1"></a><span class="fu">unlist</span>(<span class="fu">strsplit</span>(text, <span class="at">split =</span> <span class="st">" "</span>))</span>
<span id="cb180-61"><a href="#cb180-61" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-62"><a href="#cb180-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-63"><a href="#cb180-63" aria-hidden="true" tabindex="-1"></a><span class="fu">## Regular Expressions</span></span>
<span id="cb180-64"><a href="#cb180-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-67"><a href="#cb180-67" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-68"><a href="#cb180-68" aria-hidden="true" tabindex="-1"></a><span class="co"># regexpr(): Finds the position of the first match of a pattern in a string</span></span>
<span id="cb180-69"><a href="#cb180-69" aria-hidden="true" tabindex="-1"></a><span class="fu">regexpr</span>(<span class="st">"R"</span>, text)</span>
<span id="cb180-70"><a href="#cb180-70" aria-hidden="true" tabindex="-1"></a><span class="co"># gregexpr(): Finds the positions of all matches of a pattern in a string</span></span>
<span id="cb180-71"><a href="#cb180-71" aria-hidden="true" tabindex="-1"></a><span class="fu">gregexpr</span>(<span class="st">" "</span>, text)</span>
<span id="cb180-72"><a href="#cb180-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-73"><a href="#cb180-73" aria-hidden="true" tabindex="-1"></a><span class="co"># regmatches(): Extracts the matched substrings based on the positions returned by regexpr or gregexpr</span></span>
<span id="cb180-74"><a href="#cb180-74" aria-hidden="true" tabindex="-1"></a><span class="fu">regmatches</span>(text, <span class="fu">gregexpr</span>(<span class="st">" "</span>, text))</span>
<span id="cb180-75"><a href="#cb180-75" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-76"><a href="#cb180-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-77"><a href="#cb180-77" aria-hidden="true" tabindex="-1"></a><span class="fu">## Example Usage</span></span>
<span id="cb180-78"><a href="#cb180-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-81"><a href="#cb180-81" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-82"><a href="#cb180-82" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: Convert text to lowercase and replace spaces with underscores</span></span>
<span id="cb180-83"><a href="#cb180-83" aria-hidden="true" tabindex="-1"></a>cleaned_text <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"_"</span>, text))</span>
<span id="cb180-84"><a href="#cb180-84" aria-hidden="true" tabindex="-1"></a>cleaned_text</span>
<span id="cb180-85"><a href="#cb180-85" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-86"><a href="#cb180-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-87"><a href="#cb180-87" aria-hidden="true" tabindex="-1"></a>These functions provide a solid foundation for string manipulation in R. For more advanced string operations, you <span class="sc">\#</span> using the <span class="in">`stringr`</span> package, which offers a more consistent and user-friendly interface for string handling.</span>
<span id="cb180-88"><a href="#cb180-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-89"><a href="#cb180-89" aria-hidden="true" tabindex="-1"></a><span class="fu"># Overall differences</span></span>
<span id="cb180-90"><a href="#cb180-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-91"><a href="#cb180-91" aria-hidden="true" tabindex="-1"></a>We'll begin with a lookup table between the most important stringr functions and their base R equivalents.</span>
<span id="cb180-92"><a href="#cb180-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-95"><a href="#cb180-95" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-96"><a href="#cb180-96" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb180-97"><a href="#cb180-97" aria-hidden="true" tabindex="-1"></a>data_stringr_base_diff <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tribble</span>(</span>
<span id="cb180-98"><a href="#cb180-98" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>stringr,                                        <span class="sc">~</span>base_r,</span>
<span id="cb180-99"><a href="#cb180-99" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_detect(string, pattern)"</span>,                   <span class="st">"grepl(pattern, x)"</span>,</span>
<span id="cb180-100"><a href="#cb180-100" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_dup(string, times)"</span>,                        <span class="st">"strrep(x, times)"</span>,</span>
<span id="cb180-101"><a href="#cb180-101" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_extract(string, pattern)"</span>,                  <span class="st">"regmatches(x, m = regexpr(pattern, text))"</span>,</span>
<span id="cb180-102"><a href="#cb180-102" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_extract_all(string, pattern)"</span>,              <span class="st">"regmatches(x, m = gregexpr(pattern, text))"</span>,</span>
<span id="cb180-103"><a href="#cb180-103" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_length(string)"</span>,                            <span class="st">"nchar(x)"</span>,</span>
<span id="cb180-104"><a href="#cb180-104" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_locate(string, pattern)"</span>,                   <span class="st">"regexpr(pattern, text)"</span>,</span>
<span id="cb180-105"><a href="#cb180-105" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_locate_all(string, pattern)"</span>,               <span class="st">"gregexpr(pattern, text)"</span>,</span>
<span id="cb180-106"><a href="#cb180-106" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_match(string, pattern)"</span>,                    <span class="st">"regmatches(x, m = regexec(pattern, text))"</span>,</span>
<span id="cb180-107"><a href="#cb180-107" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_order(string)"</span>,                             <span class="st">"order(...)"</span>,</span>
<span id="cb180-108"><a href="#cb180-108" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_replace(string, pattern, replacement)"</span>,     <span class="st">"sub(pattern, replacement, x)"</span>,</span>
<span id="cb180-109"><a href="#cb180-109" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_replace_all(string, pattern, replacement)"</span>, <span class="st">"gsub(pattern, replacement, x)"</span>,</span>
<span id="cb180-110"><a href="#cb180-110" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_sort(string)"</span>,                              <span class="st">"sort(x)"</span>,</span>
<span id="cb180-111"><a href="#cb180-111" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_split(string, pattern)"</span>,                    <span class="st">"strsplit(x, split)"</span>,</span>
<span id="cb180-112"><a href="#cb180-112" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_sub(string, start, end)"</span>,                   <span class="st">"substr(x, start, stop)"</span>,</span>
<span id="cb180-113"><a href="#cb180-113" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_subset(string, pattern)"</span>,                   <span class="st">"grep(pattern, x, value = TRUE)"</span>,</span>
<span id="cb180-114"><a href="#cb180-114" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_to_lower(string)"</span>,                          <span class="st">"tolower(x)"</span>,</span>
<span id="cb180-115"><a href="#cb180-115" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_to_title(string)"</span>,                          <span class="st">"tools::toTitleCase(text)"</span>,</span>
<span id="cb180-116"><a href="#cb180-116" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_to_upper(string)"</span>,                          <span class="st">"toupper(x)"</span>,</span>
<span id="cb180-117"><a href="#cb180-117" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_trim(string)"</span>,                              <span class="st">"trimws(x)"</span>,</span>
<span id="cb180-118"><a href="#cb180-118" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_which(string, pattern)"</span>,                    <span class="st">"grep(pattern, x)"</span>,</span>
<span id="cb180-119"><a href="#cb180-119" aria-hidden="true" tabindex="-1"></a>  <span class="st">"str_wrap(string)"</span>,                              <span class="st">"strwrap(x)"</span></span>
<span id="cb180-120"><a href="#cb180-120" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb180-121"><a href="#cb180-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-122"><a href="#cb180-122" aria-hidden="true" tabindex="-1"></a><span class="co"># create MD table, arranged alphabetically by stringr fn name</span></span>
<span id="cb180-123"><a href="#cb180-123" aria-hidden="true" tabindex="-1"></a>data_stringr_base_diff <span class="sc">|&gt;</span> </span>
<span id="cb180-124"><a href="#cb180-124" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(</span>
<span id="cb180-125"><a href="#cb180-125" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols =</span> <span class="fu">everything</span>(),</span>
<span id="cb180-126"><a href="#cb180-126" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">paste0</span>(<span class="st">"`"</span>, .x, <span class="st">"`"</span>))</span>
<span id="cb180-127"><a href="#cb180-127" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb180-128"><a href="#cb180-128" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(stringr) <span class="sc">|&gt;</span> </span>
<span id="cb180-129"><a href="#cb180-129" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="st">`</span><span class="at">base R</span><span class="st">`</span> <span class="ot">=</span> base_r) <span class="sc">|&gt;</span> </span>
<span id="cb180-130"><a href="#cb180-130" aria-hidden="true" tabindex="-1"></a>  gt<span class="sc">::</span><span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb180-131"><a href="#cb180-131" aria-hidden="true" tabindex="-1"></a>  gt<span class="sc">::</span><span class="fu">fmt_markdown</span>(<span class="at">columns =</span> <span class="fu">everything</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb180-132"><a href="#cb180-132" aria-hidden="true" tabindex="-1"></a>  gt<span class="sc">::</span><span class="fu">tab_options</span>(<span class="at">column_labels.font.weight =</span> <span class="st">"bold"</span>)</span>
<span id="cb180-133"><a href="#cb180-133" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-134"><a href="#cb180-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-135"><a href="#cb180-135" aria-hidden="true" tabindex="-1"></a>Overall the main differences between base R and stringr are:</span>
<span id="cb180-136"><a href="#cb180-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-137"><a href="#cb180-137" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>stringr functions start with <span class="in">`str_`</span> prefix; base R string functions have no consistent naming scheme.</span>
<span id="cb180-138"><a href="#cb180-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-139"><a href="#cb180-139" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>The order of inputs is usually different between base R and stringr. In base R, the <span class="in">`pattern`</span> to match usually comes first; in stringr, the <span class="in">`string`</span> to manupulate always comes first. This makes stringr easier to use in pipes, and with <span class="in">`lapply()`</span> or <span class="in">`purrr::map()`</span>.</span>
<span id="cb180-140"><a href="#cb180-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-141"><a href="#cb180-141" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>Functions in stringr tend to do less, where many of the string processing functions in base R have multiple purposes.</span>
<span id="cb180-142"><a href="#cb180-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-143"><a href="#cb180-143" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>The output and input of stringr functions has been carefully designed. For example, the output of <span class="in">`str_locate()`</span> can be fed directly into <span class="in">`str_sub()`</span>; the same is not true of <span class="in">`regexpr()`</span> and <span class="in">`substr()`</span>.</span>
<span id="cb180-144"><a href="#cb180-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-145"><a href="#cb180-145" aria-hidden="true" tabindex="-1"></a><span class="ss">5.  </span>Base functions use arguments (like <span class="in">`perl`</span>, <span class="in">`fixed`</span>, and <span class="in">`ignore.case`</span>) to control how the pattern is interpreted. To avoid dependence between arguments, stringr instead uses helper functions (like <span class="in">`fixed()`</span>, <span class="in">`regex()`</span>, and <span class="in">`coll()`</span>).</span>
<span id="cb180-146"><a href="#cb180-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-147"><a href="#cb180-147" aria-hidden="true" tabindex="-1"></a>Next we'll walk through each of the functions, noting the similarities and important differences. These examples are adapted from the stringr documentation and here they are contrasted with the analogous base R operations.</span>
<span id="cb180-148"><a href="#cb180-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-149"><a href="#cb180-149" aria-hidden="true" tabindex="-1"></a><span class="fu"># Detect matches</span></span>
<span id="cb180-150"><a href="#cb180-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-151"><a href="#cb180-151" aria-hidden="true" tabindex="-1"></a><span class="fu">## `str_detect()`: Detect the presence or absence of a pattern in a string</span></span>
<span id="cb180-152"><a href="#cb180-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-153"><a href="#cb180-153" aria-hidden="true" tabindex="-1"></a>Suppose you want to know whether each word in a vector of fruit names contains an "a".</span>
<span id="cb180-154"><a href="#cb180-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-157"><a href="#cb180-157" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-158"><a href="#cb180-158" aria-hidden="true" tabindex="-1"></a>fruit <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"apple"</span>, <span class="st">"banana"</span>, <span class="st">"pear"</span>, <span class="st">"pineapple"</span>)</span>
<span id="cb180-159"><a href="#cb180-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-160"><a href="#cb180-160" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb180-161"><a href="#cb180-161" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="at">pattern =</span> <span class="st">"a"</span>, <span class="at">x =</span> fruit)</span>
<span id="cb180-162"><a href="#cb180-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-163"><a href="#cb180-163" aria-hidden="true" tabindex="-1"></a><span class="co">#stringr</span></span>
<span id="cb180-164"><a href="#cb180-164" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_detect</span>(fruit, <span class="at">pattern =</span> <span class="st">"a"</span>)</span>
<span id="cb180-165"><a href="#cb180-165" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-166"><a href="#cb180-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-167"><a href="#cb180-167" aria-hidden="true" tabindex="-1"></a>In base you would use <span class="in">`grepl()`</span> (see the "l" and think logical) while in stringr you use <span class="in">`str_detect()`</span> (see the verb "detect" and think of a yes/no action).</span>
<span id="cb180-168"><a href="#cb180-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-169"><a href="#cb180-169" aria-hidden="true" tabindex="-1"></a><span class="fu">## `str_which()`: Find positions matching a pattern</span></span>
<span id="cb180-170"><a href="#cb180-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-171"><a href="#cb180-171" aria-hidden="true" tabindex="-1"></a>Now you want to identify the positions of the words in a vector of fruit names that contain an "a".</span>
<span id="cb180-172"><a href="#cb180-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-175"><a href="#cb180-175" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-176"><a href="#cb180-176" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb180-177"><a href="#cb180-177" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="at">pattern =</span> <span class="st">"a"</span>, <span class="at">x =</span> fruit)</span>
<span id="cb180-178"><a href="#cb180-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-179"><a href="#cb180-179" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb180-180"><a href="#cb180-180" aria-hidden="true" tabindex="-1"></a><span class="fu">str_which</span>(fruit, <span class="at">pattern =</span> <span class="st">"a"</span>)</span>
<span id="cb180-181"><a href="#cb180-181" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-182"><a href="#cb180-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-183"><a href="#cb180-183" aria-hidden="true" tabindex="-1"></a>In base you would use <span class="in">`grep()`</span> while in stringr you use <span class="in">`str_which()`</span> (by analogy to <span class="in">`which()`</span>).</span>
<span id="cb180-184"><a href="#cb180-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-185"><a href="#cb180-185" aria-hidden="true" tabindex="-1"></a><span class="fu">## `str_count()`: Count the number of matches in a string</span></span>
<span id="cb180-186"><a href="#cb180-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-187"><a href="#cb180-187" aria-hidden="true" tabindex="-1"></a>How many "a"s are in each fruit?</span>
<span id="cb180-188"><a href="#cb180-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-191"><a href="#cb180-191" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-192"><a href="#cb180-192" aria-hidden="true" tabindex="-1"></a><span class="co"># base </span></span>
<span id="cb180-193"><a href="#cb180-193" aria-hidden="true" tabindex="-1"></a>loc <span class="ot">&lt;-</span> <span class="fu">gregexpr</span>(<span class="at">pattern =</span> <span class="st">"a"</span>, <span class="at">text =</span> fruit, <span class="at">fixed =</span> <span class="cn">TRUE</span>)</span>
<span id="cb180-194"><a href="#cb180-194" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(loc, <span class="cf">function</span>(x) <span class="fu">length</span>(<span class="fu">attr</span>(x, <span class="st">"match.length"</span>)))</span>
<span id="cb180-195"><a href="#cb180-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-196"><a href="#cb180-196" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb180-197"><a href="#cb180-197" aria-hidden="true" tabindex="-1"></a><span class="fu">str_count</span>(fruit, <span class="at">pattern =</span> <span class="st">"a"</span>)</span>
<span id="cb180-198"><a href="#cb180-198" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-199"><a href="#cb180-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-200"><a href="#cb180-200" aria-hidden="true" tabindex="-1"></a>This information can be gleaned from <span class="in">`gregexpr()`</span> in base, but you need to look at the <span class="in">`match.length`</span> attribute as the vector uses a length-1 integer vector (<span class="in">`-1`</span>) to indicate no match.</span>
<span id="cb180-201"><a href="#cb180-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-202"><a href="#cb180-202" aria-hidden="true" tabindex="-1"></a><span class="fu">## `str_locate()`: Locate the position of patterns in a string</span></span>
<span id="cb180-203"><a href="#cb180-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-204"><a href="#cb180-204" aria-hidden="true" tabindex="-1"></a>Within each fruit, where does the first "p" occur? Where are all of the "p"s?</span>
<span id="cb180-205"><a href="#cb180-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-208"><a href="#cb180-208" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-209"><a href="#cb180-209" aria-hidden="true" tabindex="-1"></a>fruit3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"papaya"</span>, <span class="st">"lime"</span>, <span class="st">"apple"</span>)</span>
<span id="cb180-210"><a href="#cb180-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-211"><a href="#cb180-211" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb180-212"><a href="#cb180-212" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="fu">gregexpr</span>(<span class="at">pattern =</span> <span class="st">"p"</span>, <span class="at">text =</span> fruit3))</span>
<span id="cb180-213"><a href="#cb180-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-214"><a href="#cb180-214" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb180-215"><a href="#cb180-215" aria-hidden="true" tabindex="-1"></a><span class="fu">str_locate</span>(fruit3, <span class="at">pattern =</span> <span class="st">"p"</span>)</span>
<span id="cb180-216"><a href="#cb180-216" aria-hidden="true" tabindex="-1"></a><span class="fu">str_locate_all</span>(fruit3, <span class="at">pattern =</span> <span class="st">"p"</span>)</span>
<span id="cb180-217"><a href="#cb180-217" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-218"><a href="#cb180-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-219"><a href="#cb180-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-220"><a href="#cb180-220" aria-hidden="true" tabindex="-1"></a><span class="fu">## `str_subset()`: Keep strings matching a pattern, or find positions</span></span>
<span id="cb180-221"><a href="#cb180-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-222"><a href="#cb180-222" aria-hidden="true" tabindex="-1"></a>We may want to retrieve strings that contain a pattern of interest:</span>
<span id="cb180-223"><a href="#cb180-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-226"><a href="#cb180-226" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-227"><a href="#cb180-227" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb180-228"><a href="#cb180-228" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span>(<span class="at">pattern =</span> <span class="st">"g"</span>, <span class="at">x =</span> fruit, <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb180-229"><a href="#cb180-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-230"><a href="#cb180-230" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb180-231"><a href="#cb180-231" aria-hidden="true" tabindex="-1"></a><span class="fu">str_subset</span>(fruit, <span class="at">pattern =</span> <span class="st">"g"</span>)</span>
<span id="cb180-232"><a href="#cb180-232" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-233"><a href="#cb180-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-234"><a href="#cb180-234" aria-hidden="true" tabindex="-1"></a><span class="fu">## `str_extract()`: Extract matching patterns from a string</span></span>
<span id="cb180-235"><a href="#cb180-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-236"><a href="#cb180-236" aria-hidden="true" tabindex="-1"></a>We may want to pick out certain patterns from a string, for example, the digits in a shopping list:</span>
<span id="cb180-237"><a href="#cb180-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-240"><a href="#cb180-240" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-241"><a href="#cb180-241" aria-hidden="true" tabindex="-1"></a>shopping_list <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"apples x4"</span>, <span class="st">"bag of flour"</span>, <span class="st">"10"</span>, <span class="st">"milk x2"</span>)</span>
<span id="cb180-242"><a href="#cb180-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-243"><a href="#cb180-243" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb180-244"><a href="#cb180-244" aria-hidden="true" tabindex="-1"></a>matches <span class="ot">&lt;-</span> <span class="fu">regexpr</span>(<span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">d+"</span>, <span class="at">text =</span> shopping_list) <span class="co"># digits</span></span>
<span id="cb180-245"><a href="#cb180-245" aria-hidden="true" tabindex="-1"></a><span class="fu">regmatches</span>(shopping_list, <span class="at">m =</span> matches)</span>
<span id="cb180-246"><a href="#cb180-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-247"><a href="#cb180-247" aria-hidden="true" tabindex="-1"></a>matches <span class="ot">&lt;-</span> <span class="fu">gregexpr</span>(<span class="at">pattern =</span> <span class="st">"[a-z]+"</span>, <span class="at">text =</span> shopping_list) <span class="co"># words</span></span>
<span id="cb180-248"><a href="#cb180-248" aria-hidden="true" tabindex="-1"></a><span class="fu">regmatches</span>(shopping_list, <span class="at">m =</span> matches)</span>
<span id="cb180-249"><a href="#cb180-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-250"><a href="#cb180-250" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb180-251"><a href="#cb180-251" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract</span>(shopping_list, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">d+"</span>) </span>
<span id="cb180-252"><a href="#cb180-252" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract_all</span>(shopping_list, <span class="st">"[a-z]+"</span>)</span>
<span id="cb180-253"><a href="#cb180-253" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-254"><a href="#cb180-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-255"><a href="#cb180-255" aria-hidden="true" tabindex="-1"></a>Base R requires the combination of <span class="in">`regexpr()`</span> with <span class="in">`regmatches()`</span>; but note that the strings without matches are dropped from the output. stringr provides <span class="in">`str_extract()`</span> and <span class="in">`str_extract_all()`</span>, and the output is always the same length as the input.</span>
<span id="cb180-256"><a href="#cb180-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-257"><a href="#cb180-257" aria-hidden="true" tabindex="-1"></a><span class="fu">## `str_match()`: Extract matched groups from a string</span></span>
<span id="cb180-258"><a href="#cb180-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-259"><a href="#cb180-259" aria-hidden="true" tabindex="-1"></a>We may also want to extract groups from a string. Here I'm going to use the scenario from Section 14.4.3 in <span class="co">[</span><span class="ot">R for Data Science</span><span class="co">](https://r4ds.had.co.nz/strings.html)</span>.</span>
<span id="cb180-260"><a href="#cb180-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-263"><a href="#cb180-263" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-264"><a href="#cb180-264" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sentences)</span>
<span id="cb180-265"><a href="#cb180-265" aria-hidden="true" tabindex="-1"></a>noun <span class="ot">&lt;-</span> <span class="st">"([A]a|[Tt]he) ([^ ]+)"</span></span>
<span id="cb180-266"><a href="#cb180-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-267"><a href="#cb180-267" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb180-268"><a href="#cb180-268" aria-hidden="true" tabindex="-1"></a>matches <span class="ot">&lt;-</span> <span class="fu">regexec</span>(<span class="at">pattern =</span> noun, <span class="at">text =</span> <span class="fu">head</span>(sentences))</span>
<span id="cb180-269"><a href="#cb180-269" aria-hidden="true" tabindex="-1"></a><span class="fu">do.call</span>(<span class="st">"rbind"</span>, <span class="fu">regmatches</span>(<span class="at">x =</span> <span class="fu">head</span>(sentences), <span class="at">m =</span> matches))</span>
<span id="cb180-270"><a href="#cb180-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-271"><a href="#cb180-271" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb180-272"><a href="#cb180-272" aria-hidden="true" tabindex="-1"></a><span class="fu">str_match</span>(<span class="fu">head</span>(sentences), <span class="at">pattern =</span> noun)</span>
<span id="cb180-273"><a href="#cb180-273" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-274"><a href="#cb180-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-275"><a href="#cb180-275" aria-hidden="true" tabindex="-1"></a>As for extracting the full match base R requires the combination of two functions, and inputs with no matches are dropped from the output.</span>
<span id="cb180-276"><a href="#cb180-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-277"><a href="#cb180-277" aria-hidden="true" tabindex="-1"></a><span class="fu"># Manage lengths</span></span>
<span id="cb180-278"><a href="#cb180-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-279"><a href="#cb180-279" aria-hidden="true" tabindex="-1"></a><span class="fu">## `str_length()`: The length of a string</span></span>
<span id="cb180-280"><a href="#cb180-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-281"><a href="#cb180-281" aria-hidden="true" tabindex="-1"></a>To determine the length of a string, base R uses <span class="in">`nchar()`</span> (not to be confused with <span class="in">`length()`</span> which gives the length of vectors, etc.) while stringr uses <span class="in">`str_length()`</span>.</span>
<span id="cb180-282"><a href="#cb180-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-285"><a href="#cb180-285" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-286"><a href="#cb180-286" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb180-287"><a href="#cb180-287" aria-hidden="true" tabindex="-1"></a><span class="fu">nchar</span>(letters)</span>
<span id="cb180-288"><a href="#cb180-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-289"><a href="#cb180-289" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb180-290"><a href="#cb180-290" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(letters)</span>
<span id="cb180-291"><a href="#cb180-291" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-292"><a href="#cb180-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-293"><a href="#cb180-293" aria-hidden="true" tabindex="-1"></a>There are some subtle differences between base and stringr here. <span class="in">`nchar()`</span> requires a character vector, so it will return an error if used on a factor. <span class="in">`str_length()`</span> can handle a factor input.</span>
<span id="cb180-294"><a href="#cb180-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-297"><a href="#cb180-297" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-298"><a href="#cb180-298" aria-hidden="true" tabindex="-1"></a><span class="co">#| error: true</span></span>
<span id="cb180-299"><a href="#cb180-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-300"><a href="#cb180-300" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb180-301"><a href="#cb180-301" aria-hidden="true" tabindex="-1"></a><span class="fu">nchar</span>(<span class="fu">factor</span>(<span class="st">"abc"</span>)) </span>
<span id="cb180-302"><a href="#cb180-302" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-303"><a href="#cb180-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-306"><a href="#cb180-306" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-307"><a href="#cb180-307" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb180-308"><a href="#cb180-308" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(<span class="fu">factor</span>(<span class="st">"abc"</span>))</span>
<span id="cb180-309"><a href="#cb180-309" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-310"><a href="#cb180-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-311"><a href="#cb180-311" aria-hidden="true" tabindex="-1"></a>Note that "characters" is a poorly defined concept, and technically both <span class="in">`nchar()`</span> and <span class="in">`str_length()`</span> returns the number of code points. This is usually the same as what you'd consider to be a charcter, but not always:</span>
<span id="cb180-312"><a href="#cb180-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-315"><a href="#cb180-315" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-316"><a href="#cb180-316" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"\u00fc"</span>, <span class="st">"u\u0308"</span>)</span>
<span id="cb180-317"><a href="#cb180-317" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb180-318"><a href="#cb180-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-319"><a href="#cb180-319" aria-hidden="true" tabindex="-1"></a><span class="fu">nchar</span>(x)</span>
<span id="cb180-320"><a href="#cb180-320" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(x)</span>
<span id="cb180-321"><a href="#cb180-321" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-322"><a href="#cb180-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-323"><a href="#cb180-323" aria-hidden="true" tabindex="-1"></a><span class="fu">## `str_pad()`: Pad a string</span></span>
<span id="cb180-324"><a href="#cb180-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-325"><a href="#cb180-325" aria-hidden="true" tabindex="-1"></a>To pad a string to a certain width, use stringr's <span class="in">`str_pad()`</span>. In base R you could use <span class="in">`sprintf()`</span>, but unlike <span class="in">`str_pad()`</span>, <span class="in">`sprintf()`</span> has many other functionalities.</span>
<span id="cb180-326"><a href="#cb180-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-329"><a href="#cb180-329" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-330"><a href="#cb180-330" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb180-331"><a href="#cb180-331" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">"%30s"</span>, <span class="st">"Sriram"</span>)</span>
<span id="cb180-332"><a href="#cb180-332" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">"%-30s"</span>, <span class="st">"Sriram"</span>)</span>
<span id="cb180-333"><a href="#cb180-333" aria-hidden="true" tabindex="-1"></a><span class="co"># "both" is not as straightforward</span></span>
<span id="cb180-334"><a href="#cb180-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-335"><a href="#cb180-335" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb180-336"><a href="#cb180-336" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(</span>
<span id="cb180-337"><a href="#cb180-337" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_pad</span>(<span class="st">"Sriram"</span>, <span class="dv">30</span>, <span class="st">"left"</span>),</span>
<span id="cb180-338"><a href="#cb180-338" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_pad</span>(<span class="st">"Sriram"</span>, <span class="dv">30</span>, <span class="st">"right"</span>),</span>
<span id="cb180-339"><a href="#cb180-339" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_pad</span>(<span class="st">"Sriram"</span>, <span class="dv">30</span>, <span class="st">"both"</span>)</span>
<span id="cb180-340"><a href="#cb180-340" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb180-341"><a href="#cb180-341" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-342"><a href="#cb180-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-343"><a href="#cb180-343" aria-hidden="true" tabindex="-1"></a><span class="fu">## `str_trunc()`: Truncate a character string</span></span>
<span id="cb180-344"><a href="#cb180-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-345"><a href="#cb180-345" aria-hidden="true" tabindex="-1"></a>The stringr package provides an easy way to truncate a character string: <span class="in">`str_trunc()`</span>. Base R has no function to do this directly.</span>
<span id="cb180-346"><a href="#cb180-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-349"><a href="#cb180-349" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-350"><a href="#cb180-350" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">"This string is moderately long"</span></span>
<span id="cb180-351"><a href="#cb180-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-352"><a href="#cb180-352" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb180-353"><a href="#cb180-353" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(</span>
<span id="cb180-354"><a href="#cb180-354" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_trunc</span>(x, <span class="dv">20</span>, <span class="st">"right"</span>),</span>
<span id="cb180-355"><a href="#cb180-355" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_trunc</span>(x, <span class="dv">20</span>, <span class="st">"left"</span>),</span>
<span id="cb180-356"><a href="#cb180-356" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_trunc</span>(x, <span class="dv">20</span>, <span class="st">"center"</span>)</span>
<span id="cb180-357"><a href="#cb180-357" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb180-358"><a href="#cb180-358" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-359"><a href="#cb180-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-360"><a href="#cb180-360" aria-hidden="true" tabindex="-1"></a><span class="fu">## `str_trim()`: Trim whitespace from a string</span></span>
<span id="cb180-361"><a href="#cb180-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-362"><a href="#cb180-362" aria-hidden="true" tabindex="-1"></a>Similarly, stringr provides <span class="in">`str_trim()`</span> to trim whitespace from a string. This is analogous to base R's <span class="in">`trimws()`</span> added in R 3.3.0.</span>
<span id="cb180-363"><a href="#cb180-363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-366"><a href="#cb180-366" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-367"><a href="#cb180-367" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb180-368"><a href="#cb180-368" aria-hidden="true" tabindex="-1"></a><span class="fu">trimws</span>(<span class="st">" String with trailing and leading white space</span><span class="sc">\t</span><span class="st">"</span>)</span>
<span id="cb180-369"><a href="#cb180-369" aria-hidden="true" tabindex="-1"></a><span class="fu">trimws</span>(<span class="st">"</span><span class="sc">\n\n</span><span class="st">String with trailing and leading white space</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb180-370"><a href="#cb180-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-371"><a href="#cb180-371" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb180-372"><a href="#cb180-372" aria-hidden="true" tabindex="-1"></a><span class="fu">str_trim</span>(<span class="st">" String with trailing and leading white space</span><span class="sc">\t</span><span class="st">"</span>)</span>
<span id="cb180-373"><a href="#cb180-373" aria-hidden="true" tabindex="-1"></a><span class="fu">str_trim</span>(<span class="st">"</span><span class="sc">\n\n</span><span class="st">String with trailing and leading white space</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb180-374"><a href="#cb180-374" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-375"><a href="#cb180-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-376"><a href="#cb180-376" aria-hidden="true" tabindex="-1"></a>The stringr function <span class="in">`str_squish()`</span> allows for extra whitespace within a string to be trimmed (in contrast to <span class="in">`str_trim()`</span> which removes whitespace at the beginning and/or end of string). In base R, one might take advantage of <span class="in">`gsub()`</span> to accomplish the same effect.</span>
<span id="cb180-377"><a href="#cb180-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-380"><a href="#cb180-380" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-381"><a href="#cb180-381" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb180-382"><a href="#cb180-382" aria-hidden="true" tabindex="-1"></a><span class="fu">str_squish</span>(<span class="st">" String with trailing, middle,   and leading white space</span><span class="sc">\t</span><span class="st">"</span>)</span>
<span id="cb180-383"><a href="#cb180-383" aria-hidden="true" tabindex="-1"></a><span class="fu">str_squish</span>(<span class="st">"</span><span class="sc">\n\n</span><span class="st">String with excess, trailing and leading white space</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb180-384"><a href="#cb180-384" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-385"><a href="#cb180-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-386"><a href="#cb180-386" aria-hidden="true" tabindex="-1"></a><span class="fu">## `str_wrap()`: Wrap strings into nicely formatted paragraphs</span></span>
<span id="cb180-387"><a href="#cb180-387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-388"><a href="#cb180-388" aria-hidden="true" tabindex="-1"></a><span class="in">`strwrap()`</span> and <span class="in">`str_wrap()`</span> use different algorithms. <span class="in">`str_wrap()`</span> uses the famous <span class="co">[</span><span class="ot">Knuth-Plass algorithm</span><span class="co">](http://litherum.blogspot.com/2015/07/knuth-plass-line-breaking-algorithm.html)</span>.</span>
<span id="cb180-389"><a href="#cb180-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-392"><a href="#cb180-392" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-393"><a href="#cb180-393" aria-hidden="true" tabindex="-1"></a>gettysburg <span class="ot">&lt;-</span> <span class="st">"Four score and seven years ago our fathers brought forth on this continent, a new nation, conceived in Liberty, and dedicated to the proposition that all men are created equal."</span></span>
<span id="cb180-394"><a href="#cb180-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-395"><a href="#cb180-395" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb180-396"><a href="#cb180-396" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">strwrap</span>(gettysburg, <span class="at">width =</span> <span class="dv">60</span>), <span class="at">sep =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb180-397"><a href="#cb180-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-398"><a href="#cb180-398" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb180-399"><a href="#cb180-399" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">str_wrap</span>(gettysburg, <span class="at">width =</span> <span class="dv">60</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb180-400"><a href="#cb180-400" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-401"><a href="#cb180-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-402"><a href="#cb180-402" aria-hidden="true" tabindex="-1"></a>Note that <span class="in">`strwrap()`</span> returns a character vector with one element for each line; <span class="in">`str_wrap()`</span> returns a single string containing line breaks.</span>
<span id="cb180-403"><a href="#cb180-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-404"><a href="#cb180-404" aria-hidden="true" tabindex="-1"></a><span class="fu"># Mutate strings</span></span>
<span id="cb180-405"><a href="#cb180-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-406"><a href="#cb180-406" aria-hidden="true" tabindex="-1"></a><span class="fu">## `str_replace()`: Replace matched patterns in a string</span></span>
<span id="cb180-407"><a href="#cb180-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-408"><a href="#cb180-408" aria-hidden="true" tabindex="-1"></a>To replace certain patterns within a string, stringr provides the functions <span class="in">`str_replace()`</span> and <span class="in">`str_replace_all()`</span>. The base R equivalents are <span class="in">`sub()`</span> and <span class="in">`gsub()`</span>. Note the difference in default input order again.</span>
<span id="cb180-409"><a href="#cb180-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-412"><a href="#cb180-412" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-413"><a href="#cb180-413" aria-hidden="true" tabindex="-1"></a>fruits <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"apple"</span>, <span class="st">"banana"</span>, <span class="st">"pear"</span>, <span class="st">"pineapple"</span>)</span>
<span id="cb180-414"><a href="#cb180-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-415"><a href="#cb180-415" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb180-416"><a href="#cb180-416" aria-hidden="true" tabindex="-1"></a><span class="fu">sub</span>(<span class="st">"[aeiou]"</span>, <span class="st">"-"</span>, fruits)</span>
<span id="cb180-417"><a href="#cb180-417" aria-hidden="true" tabindex="-1"></a><span class="fu">gsub</span>(<span class="st">"[aeiou]"</span>, <span class="st">"-"</span>, fruits)</span>
<span id="cb180-418"><a href="#cb180-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-419"><a href="#cb180-419" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb180-420"><a href="#cb180-420" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(fruits, <span class="st">"[aeiou]"</span>, <span class="st">"-"</span>)</span>
<span id="cb180-421"><a href="#cb180-421" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace_all</span>(fruits, <span class="st">"[aeiou]"</span>, <span class="st">"-"</span>)</span>
<span id="cb180-422"><a href="#cb180-422" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-423"><a href="#cb180-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-424"><a href="#cb180-424" aria-hidden="true" tabindex="-1"></a><span class="fu">## case: Convert case of a string</span></span>
<span id="cb180-425"><a href="#cb180-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-426"><a href="#cb180-426" aria-hidden="true" tabindex="-1"></a>Both stringr and base R have functions to convert to upper and lower case. Title case is also provided in stringr.</span>
<span id="cb180-427"><a href="#cb180-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-430"><a href="#cb180-430" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-431"><a href="#cb180-431" aria-hidden="true" tabindex="-1"></a>dog <span class="ot">&lt;-</span> <span class="st">"The quick brown dog"</span></span>
<span id="cb180-432"><a href="#cb180-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-433"><a href="#cb180-433" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb180-434"><a href="#cb180-434" aria-hidden="true" tabindex="-1"></a><span class="fu">toupper</span>(dog)</span>
<span id="cb180-435"><a href="#cb180-435" aria-hidden="true" tabindex="-1"></a><span class="fu">tolower</span>(dog)</span>
<span id="cb180-436"><a href="#cb180-436" aria-hidden="true" tabindex="-1"></a>tools<span class="sc">::</span><span class="fu">toTitleCase</span>(dog)</span>
<span id="cb180-437"><a href="#cb180-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-438"><a href="#cb180-438" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb180-439"><a href="#cb180-439" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_upper</span>(dog)</span>
<span id="cb180-440"><a href="#cb180-440" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_lower</span>(dog)</span>
<span id="cb180-441"><a href="#cb180-441" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_title</span>(dog)</span>
<span id="cb180-442"><a href="#cb180-442" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-443"><a href="#cb180-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-444"><a href="#cb180-444" aria-hidden="true" tabindex="-1"></a>In stringr we can control the locale, while in base R locale distinctions are controlled with global variables. Therefore, the output of your base R code may vary across different computers with different global settings.</span>
<span id="cb180-445"><a href="#cb180-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-448"><a href="#cb180-448" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-449"><a href="#cb180-449" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb180-450"><a href="#cb180-450" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_upper</span>(<span class="st">"i"</span>) <span class="co"># English</span></span>
<span id="cb180-451"><a href="#cb180-451" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_upper</span>(<span class="st">"i"</span>, <span class="at">locale =</span> <span class="st">"tr"</span>) <span class="co"># Turkish</span></span>
<span id="cb180-452"><a href="#cb180-452" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-453"><a href="#cb180-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-454"><a href="#cb180-454" aria-hidden="true" tabindex="-1"></a><span class="fu"># Join and split</span></span>
<span id="cb180-455"><a href="#cb180-455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-456"><a href="#cb180-456" aria-hidden="true" tabindex="-1"></a><span class="fu">## `str_flatten()`: Flatten a string</span></span>
<span id="cb180-457"><a href="#cb180-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-458"><a href="#cb180-458" aria-hidden="true" tabindex="-1"></a>If we want to take elements of a string vector and collapse them to a single string we can use the <span class="in">`collapse`</span> argument in <span class="in">`paste()`</span> or use stringr's <span class="in">`str_flatten()`</span>.</span>
<span id="cb180-459"><a href="#cb180-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-462"><a href="#cb180-462" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-463"><a href="#cb180-463" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb180-464"><a href="#cb180-464" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(letters, <span class="at">collapse =</span> <span class="st">"-"</span>)</span>
<span id="cb180-465"><a href="#cb180-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-466"><a href="#cb180-466" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb180-467"><a href="#cb180-467" aria-hidden="true" tabindex="-1"></a><span class="fu">str_flatten</span>(letters, <span class="at">collapse =</span> <span class="st">"-"</span>)</span>
<span id="cb180-468"><a href="#cb180-468" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-469"><a href="#cb180-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-470"><a href="#cb180-470" aria-hidden="true" tabindex="-1"></a>The advantage of <span class="in">`str_flatten()`</span> is that it always returns a vector the same length as its input; to predict the return length of <span class="in">`paste()`</span> you must carefully read all arguments.</span>
<span id="cb180-471"><a href="#cb180-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-472"><a href="#cb180-472" aria-hidden="true" tabindex="-1"></a><span class="fu">## `str_dup()`: duplicate strings within a character vector</span></span>
<span id="cb180-473"><a href="#cb180-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-474"><a href="#cb180-474" aria-hidden="true" tabindex="-1"></a>To duplicate strings within a character vector use <span class="in">`strrep()`</span> (in R 3.3.0 or greater) or <span class="in">`str_dup()`</span>:</span>
<span id="cb180-475"><a href="#cb180-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-478"><a href="#cb180-478" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-479"><a href="#cb180-479" aria-hidden="true" tabindex="-1"></a>fruit <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"apple"</span>, <span class="st">"pear"</span>, <span class="st">"banana"</span>)</span>
<span id="cb180-480"><a href="#cb180-480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-481"><a href="#cb180-481" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb180-482"><a href="#cb180-482" aria-hidden="true" tabindex="-1"></a><span class="fu">strrep</span>(fruit, <span class="dv">2</span>)</span>
<span id="cb180-483"><a href="#cb180-483" aria-hidden="true" tabindex="-1"></a><span class="fu">strrep</span>(fruit, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb180-484"><a href="#cb180-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-485"><a href="#cb180-485" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb180-486"><a href="#cb180-486" aria-hidden="true" tabindex="-1"></a><span class="fu">str_dup</span>(fruit, <span class="dv">2</span>)</span>
<span id="cb180-487"><a href="#cb180-487" aria-hidden="true" tabindex="-1"></a><span class="fu">str_dup</span>(fruit, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb180-488"><a href="#cb180-488" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-489"><a href="#cb180-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-490"><a href="#cb180-490" aria-hidden="true" tabindex="-1"></a><span class="fu">## `str_split()`: Split up a string into pieces</span></span>
<span id="cb180-491"><a href="#cb180-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-492"><a href="#cb180-492" aria-hidden="true" tabindex="-1"></a>To split a string into pieces with breaks based on a particular pattern match stringr uses <span class="in">`str_split()`</span> and base R uses <span class="in">`strsplit()`</span>. Unlike most other functions, <span class="in">`strsplit()`</span> starts with the character vector to modify.</span>
<span id="cb180-493"><a href="#cb180-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-496"><a href="#cb180-496" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-497"><a href="#cb180-497" aria-hidden="true" tabindex="-1"></a>fruits <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb180-498"><a href="#cb180-498" aria-hidden="true" tabindex="-1"></a>  <span class="st">"apples and oranges and pears and bananas"</span>,</span>
<span id="cb180-499"><a href="#cb180-499" aria-hidden="true" tabindex="-1"></a>  <span class="st">"pineapples and mangos and guavas"</span></span>
<span id="cb180-500"><a href="#cb180-500" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb180-501"><a href="#cb180-501" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb180-502"><a href="#cb180-502" aria-hidden="true" tabindex="-1"></a><span class="fu">strsplit</span>(fruits, <span class="st">" and "</span>)</span>
<span id="cb180-503"><a href="#cb180-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-504"><a href="#cb180-504" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb180-505"><a href="#cb180-505" aria-hidden="true" tabindex="-1"></a><span class="fu">str_split</span>(fruits, <span class="st">" and "</span>)</span>
<span id="cb180-506"><a href="#cb180-506" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-507"><a href="#cb180-507" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-508"><a href="#cb180-508" aria-hidden="true" tabindex="-1"></a>The stringr package's <span class="in">`str_split()`</span> allows for more control over the split, including restricting the number of possible matches.</span>
<span id="cb180-509"><a href="#cb180-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-512"><a href="#cb180-512" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-513"><a href="#cb180-513" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb180-514"><a href="#cb180-514" aria-hidden="true" tabindex="-1"></a><span class="fu">str_split</span>(fruits, <span class="st">" and "</span>, <span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb180-515"><a href="#cb180-515" aria-hidden="true" tabindex="-1"></a><span class="fu">str_split</span>(fruits, <span class="st">" and "</span>, <span class="at">n =</span> <span class="dv">2</span>)</span>
<span id="cb180-516"><a href="#cb180-516" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-517"><a href="#cb180-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-518"><a href="#cb180-518" aria-hidden="true" tabindex="-1"></a><span class="fu">## `str_glue()`: Interpolate strings</span></span>
<span id="cb180-519"><a href="#cb180-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-520"><a href="#cb180-520" aria-hidden="true" tabindex="-1"></a>It's often useful to interpolate varying values into a fixed string. In base R, you can use <span class="in">`sprintf()`</span> for this purpose; stringr provides a wrapper for the more general purpose <span class="co">[</span><span class="ot">glue</span><span class="co">](https://glue.tidyverse.org)</span> package.</span>
<span id="cb180-521"><a href="#cb180-521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-524"><a href="#cb180-524" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-525"><a href="#cb180-525" aria-hidden="true" tabindex="-1"></a>name <span class="ot">&lt;-</span> <span class="st">"Fred"</span></span>
<span id="cb180-526"><a href="#cb180-526" aria-hidden="true" tabindex="-1"></a>age <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb180-527"><a href="#cb180-527" aria-hidden="true" tabindex="-1"></a>anniversary <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"1991-10-12"</span>)</span>
<span id="cb180-528"><a href="#cb180-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-529"><a href="#cb180-529" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb180-530"><a href="#cb180-530" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(</span>
<span id="cb180-531"><a href="#cb180-531" aria-hidden="true" tabindex="-1"></a>  <span class="st">"My name is %s my age next year is %s and my anniversary is %s."</span>, </span>
<span id="cb180-532"><a href="#cb180-532" aria-hidden="true" tabindex="-1"></a>  name,</span>
<span id="cb180-533"><a href="#cb180-533" aria-hidden="true" tabindex="-1"></a>  age <span class="sc">+</span> <span class="dv">1</span>,</span>
<span id="cb180-534"><a href="#cb180-534" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format</span>(anniversary, <span class="st">"%A, %B %d, %Y"</span>)</span>
<span id="cb180-535"><a href="#cb180-535" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb180-536"><a href="#cb180-536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-537"><a href="#cb180-537" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb180-538"><a href="#cb180-538" aria-hidden="true" tabindex="-1"></a><span class="fu">str_glue</span>(</span>
<span id="cb180-539"><a href="#cb180-539" aria-hidden="true" tabindex="-1"></a>  <span class="st">"My name is {name}, "</span>,</span>
<span id="cb180-540"><a href="#cb180-540" aria-hidden="true" tabindex="-1"></a>  <span class="st">"my age next year is {age + 1}, "</span>,</span>
<span id="cb180-541"><a href="#cb180-541" aria-hidden="true" tabindex="-1"></a>  <span class="st">"and my anniversary is {format(anniversary, '%A, %B %d, %Y')}."</span></span>
<span id="cb180-542"><a href="#cb180-542" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb180-543"><a href="#cb180-543" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-544"><a href="#cb180-544" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-545"><a href="#cb180-545" aria-hidden="true" tabindex="-1"></a><span class="fu"># Order strings</span></span>
<span id="cb180-546"><a href="#cb180-546" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-547"><a href="#cb180-547" aria-hidden="true" tabindex="-1"></a><span class="fu">## `str_order()`: Order or sort a character vector</span></span>
<span id="cb180-548"><a href="#cb180-548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-549"><a href="#cb180-549" aria-hidden="true" tabindex="-1"></a>Both base R and stringr have separate functions to order and sort strings.</span>
<span id="cb180-550"><a href="#cb180-550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-553"><a href="#cb180-553" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-554"><a href="#cb180-554" aria-hidden="true" tabindex="-1"></a><span class="co"># base</span></span>
<span id="cb180-555"><a href="#cb180-555" aria-hidden="true" tabindex="-1"></a><span class="fu">order</span>(letters)</span>
<span id="cb180-556"><a href="#cb180-556" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(letters)</span>
<span id="cb180-557"><a href="#cb180-557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-558"><a href="#cb180-558" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb180-559"><a href="#cb180-559" aria-hidden="true" tabindex="-1"></a><span class="fu">str_order</span>(letters)</span>
<span id="cb180-560"><a href="#cb180-560" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sort</span>(letters)</span>
<span id="cb180-561"><a href="#cb180-561" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-562"><a href="#cb180-562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-563"><a href="#cb180-563" aria-hidden="true" tabindex="-1"></a>Some options in <span class="in">`str_order()`</span> and <span class="in">`str_sort()`</span> don't have analogous base R options. For example, the stringr functions have a <span class="in">`locale`</span> argument to control how to order or sort. In base R the locale is a global setting, so the outputs of <span class="in">`sort()`</span> and <span class="in">`order()`</span> may differ across different computers. For example, in the Norwegian alphabet, å comes after z:</span>
<span id="cb180-564"><a href="#cb180-564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-567"><a href="#cb180-567" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-568"><a href="#cb180-568" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"å"</span>, <span class="st">"a"</span>, <span class="st">"z"</span>)</span>
<span id="cb180-569"><a href="#cb180-569" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sort</span>(x)</span>
<span id="cb180-570"><a href="#cb180-570" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sort</span>(x, <span class="at">locale =</span> <span class="st">"no"</span>)</span>
<span id="cb180-571"><a href="#cb180-571" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-572"><a href="#cb180-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-573"><a href="#cb180-573" aria-hidden="true" tabindex="-1"></a>The stringr functions also have a <span class="in">`numeric`</span> argument to sort digits numerically instead of treating them as strings.</span>
<span id="cb180-574"><a href="#cb180-574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-577"><a href="#cb180-577" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-578"><a href="#cb180-578" aria-hidden="true" tabindex="-1"></a><span class="co"># stringr</span></span>
<span id="cb180-579"><a href="#cb180-579" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"100a10"</span>, <span class="st">"100a5"</span>, <span class="st">"2b"</span>, <span class="st">"2a"</span>)</span>
<span id="cb180-580"><a href="#cb180-580" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sort</span>(x)</span>
<span id="cb180-581"><a href="#cb180-581" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sort</span>(x, <span class="at">numeric =</span> <span class="cn">TRUE</span>)</span>
<span id="cb180-582"><a href="#cb180-582" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb180-583"><a href="#cb180-583" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-586"><a href="#cb180-586" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb180-587"><a href="#cb180-587" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb180-588"><a href="#cb180-588" aria-hidden="true" tabindex="-1"></a>ae <span class="ot">&lt;-</span> haven<span class="sc">::</span><span class="fu">read_sas</span>(<span class="st">"./data/sdtm/ae.sas7bdat"</span>)</span>
<span id="cb180-589"><a href="#cb180-589" aria-hidden="true" tabindex="-1"></a>ae1 <span class="ot">&lt;-</span> ae <span class="sc">|&gt;</span> </span>
<span id="cb180-590"><a href="#cb180-590" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span> (USUBJID,AEDECOD,AEBODSYS)</span>
<span id="cb180-591"><a href="#cb180-591" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-592"><a href="#cb180-592" aria-hidden="true" tabindex="-1"></a><span class="co">#find function in sas, str_detect</span></span>
<span id="cb180-593"><a href="#cb180-593" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-594"><a href="#cb180-594" aria-hidden="true" tabindex="-1"></a>ae2 <span class="ot">&lt;-</span> ae1 <span class="sc">|&gt;</span> </span>
<span id="cb180-595"><a href="#cb180-595" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(AEDECOD,<span class="st">"HER"</span>))</span>
<span id="cb180-596"><a href="#cb180-596" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-597"><a href="#cb180-597" aria-hidden="true" tabindex="-1"></a>ae2 <span class="ot">&lt;-</span> ae1 <span class="sc">|&gt;</span> </span>
<span id="cb180-598"><a href="#cb180-598" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(AEDECOD,<span class="st">"^HIATUS "</span>)) <span class="co"># start of the string</span></span>
<span id="cb180-599"><a href="#cb180-599" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-600"><a href="#cb180-600" aria-hidden="true" tabindex="-1"></a>ae2 <span class="ot">&lt;-</span> ae1 <span class="sc">|&gt;</span> </span>
<span id="cb180-601"><a href="#cb180-601" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(AEDECOD,<span class="st">"HERNIA$"</span>)) <span class="co"># end of the string</span></span>
<span id="cb180-602"><a href="#cb180-602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-603"><a href="#cb180-603" aria-hidden="true" tabindex="-1"></a><span class="co">#substr in sas</span></span>
<span id="cb180-604"><a href="#cb180-604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-605"><a href="#cb180-605" aria-hidden="true" tabindex="-1"></a>ae2 <span class="ot">&lt;-</span> ae1 <span class="sc">|&gt;</span> </span>
<span id="cb180-606"><a href="#cb180-606" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">newvar1=</span><span class="fu">str_sub</span>(AEDECOD,<span class="dv">1</span>,<span class="dv">6</span>),</span>
<span id="cb180-607"><a href="#cb180-607" aria-hidden="true" tabindex="-1"></a>         <span class="at">newvar2=</span><span class="fu">str_sub</span>(AEDECOD,<span class="dv">2</span>,<span class="dv">6</span>),</span>
<span id="cb180-608"><a href="#cb180-608" aria-hidden="true" tabindex="-1"></a>         <span class="at">newvar3=</span><span class="fu">str_sub</span>(AEDECOD,<span class="sc">-</span><span class="dv">3</span>),</span>
<span id="cb180-609"><a href="#cb180-609" aria-hidden="true" tabindex="-1"></a>         <span class="at">newvar4=</span><span class="fu">str_length</span>(AEDECOD))</span>
<span id="cb180-610"><a href="#cb180-610" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-611"><a href="#cb180-611" aria-hidden="true" tabindex="-1"></a><span class="co">#cat function in sas , Str_c in r</span></span>
<span id="cb180-612"><a href="#cb180-612" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-613"><a href="#cb180-613" aria-hidden="true" tabindex="-1"></a>ae2 <span class="ot">&lt;-</span> ae1 <span class="sc">|&gt;</span> </span>
<span id="cb180-614"><a href="#cb180-614" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">newvar1=</span><span class="fu">str_c</span>(AEDECOD,AEBODSYS,<span class="at">sep=</span><span class="st">"/"</span>),</span>
<span id="cb180-615"><a href="#cb180-615" aria-hidden="true" tabindex="-1"></a>         <span class="at">newvar2=</span><span class="fu">paste</span>(AEDECOD,AEBODSYS,<span class="at">sep=</span><span class="st">"/"</span>))</span>
<span id="cb180-616"><a href="#cb180-616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-617"><a href="#cb180-617" aria-hidden="true" tabindex="-1"></a><span class="co"># scan function in sas, word in r</span></span>
<span id="cb180-618"><a href="#cb180-618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-619"><a href="#cb180-619" aria-hidden="true" tabindex="-1"></a>ae2 <span class="ot">&lt;-</span> ae1 <span class="sc">|&gt;</span> </span>
<span id="cb180-620"><a href="#cb180-620" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">newvar1=</span><span class="fu">word</span>(AEDECOD,<span class="dv">1</span>),</span>
<span id="cb180-621"><a href="#cb180-621" aria-hidden="true" tabindex="-1"></a>         <span class="at">newvar2=</span><span class="fu">word</span>(AEDECOD,<span class="dv">2</span>))</span>
<span id="cb180-622"><a href="#cb180-622" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-623"><a href="#cb180-623" aria-hidden="true" tabindex="-1"></a><span class="co"># upper &amp; lower case</span></span>
<span id="cb180-624"><a href="#cb180-624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-625"><a href="#cb180-625" aria-hidden="true" tabindex="-1"></a>ae2 <span class="ot">&lt;-</span> ae1 <span class="sc">|&gt;</span> </span>
<span id="cb180-626"><a href="#cb180-626" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">newvar1=</span><span class="fu">str_to_lower</span>(AEDECOD),</span>
<span id="cb180-627"><a href="#cb180-627" aria-hidden="true" tabindex="-1"></a>         <span class="at">newvar2=</span><span class="fu">str_to_upper</span>(AEDECOD),</span>
<span id="cb180-628"><a href="#cb180-628" aria-hidden="true" tabindex="-1"></a>         <span class="at">newvar3=</span><span class="fu">str_to_title</span>(AEDECOD),</span>
<span id="cb180-629"><a href="#cb180-629" aria-hidden="true" tabindex="-1"></a>         <span class="at">newvar4=</span><span class="fu">str_to_sentence</span>(AEDECOD))</span>
<span id="cb180-630"><a href="#cb180-630" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-631"><a href="#cb180-631" aria-hidden="true" tabindex="-1"></a><span class="co">#str_trim</span></span>
<span id="cb180-632"><a href="#cb180-632" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-633"><a href="#cb180-633" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="st">"  this is    my String   "</span></span>
<span id="cb180-634"><a href="#cb180-634" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">str_trim</span>(a)</span>
<span id="cb180-635"><a href="#cb180-635" aria-hidden="true" tabindex="-1"></a>c <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(a,<span class="st">" "</span>,<span class="st">" "</span>)</span>
<span id="cb180-636"><a href="#cb180-636" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">str_squish</span>(a)</span>
<span id="cb180-637"><a href="#cb180-637" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-638"><a href="#cb180-638" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code></pre></div><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>